{"version":3,"sources":["assets/newscripts/Mains/iceMgr.js"],"names":["cc","Class","Component","properties","icePrefab","Prefab","iceParent","Node","iceArray","UpParent","qqAnim","UpArray","qqmoveNum","onLoad","ZL","iceMgr","Array","start","InitIce","row","comeInfo","rowArray","column","lvdata","ice","instantiate","addChild","getComponent","InitView","push","InitUPAnim","eff","qq","InitQQ","UPAllMove","list","type","qry","length","n","schedule","QQMove","bind"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //ice父物体\r\n        icePrefab: cc.Prefab,\r\n        //ice容器\r\n        iceParent: cc.Node,\r\n        iceArray: null,\r\n        //上层父物体\r\n        UpParent: cc.Node,\r\n        //毛球预制体\r\n        qqAnim: cc.Prefab,\r\n        UpArray: null,\r\n        //需要移动的毛球的数量\r\n        qqmoveNum: 0,\r\n    },\r\n    onLoad() {\r\n        cc.ZL.iceMgr = this;\r\n        this.iceArray = new Array();\r\n        this.UpArray = new Array();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n    //实例化下层障碍\r\n    InitIce() {\r\n        for (let row = 0; row < comeInfo.row; row++) {\r\n            let rowArray = new Array();\r\n            for (let column = 0; column < comeInfo.column; column++) {\r\n                // if(lvdata[\"Lv\"+comeInfo.now_lv].ice[row][column]!=0){\r\n                if (lvdata.ice[row][column] != 0) {\r\n                    let ice = cc.instantiate(this.icePrefab);\r\n                    this.iceParent.addChild(ice);\r\n                    ice.getComponent(\"ice\").InitView(row, column);\r\n                    rowArray.push(ice.getComponent(\"ice\"));\r\n                } else {\r\n                    rowArray.push(0);\r\n                }\r\n            }\r\n            this.iceArray.push(rowArray);\r\n        }\r\n    },\r\n    //实例化上层障碍\r\n    InitUPAnim() {\r\n        for (let row = 0; row < comeInfo.row; row++) {\r\n            let rowArray = new Array();\r\n            for (let column = 0; column < comeInfo.column; column++) {\r\n                // if(lvdata[\"Lv\"+comeInfo.now_lv].eff[row][column]==13){//实例化小毛球\r\n                if (lvdata.eff[row][column] == 13) {//实例化小毛球\r\n                    let qq = cc.instantiate(this.qqAnim);\r\n                    this.UpParent.addChild(qq);\r\n                    qq.getComponent(\"QQ\").InitQQ(row, column, 13);\r\n                    rowArray.push(qq.getComponent(\"QQ\"));\r\n                    this.qqmoveNum += 1;\r\n                } else {\r\n                    rowArray.push(0);\r\n                }\r\n            }\r\n            this.UpArray.push(rowArray);\r\n        }\r\n    },\r\n    //上层可移动的全部移动一下\r\n    UPAllMove() {\r\n        let list = new Array();\r\n        for (let row = 0; row < comeInfo.row; row++) {\r\n            for (let column = 0; column < comeInfo.column; column++) {\r\n                if (this.UpArray[row][column].type == 13) {//就是有东西\r\n                    list.push(this.UpArray[row][column]);\r\n                }\r\n            }\r\n        }\r\n        let qry = list.length;\r\n        if (qry == 0) {\r\n            return;\r\n        }\r\n        let n = 0;\r\n        this.schedule(function () {\r\n            list[n].QQMove();\r\n            n++;\r\n        }.bind(this), 0.1, qry - 1);\r\n\r\n    }\r\n});\r\n"]}