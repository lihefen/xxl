{"version":3,"sources":["assets/newscripts/Common.js"],"names":["module","exports","shares","ids","urls","wechatShare","CC_WECHATGAME","idx","Math","floor","random","length","str","wx","shareAppMessage","title","imageUrl","wxDownloader","REMOTE_SERVER_ROOT","cc","url","raw","success","res","console","log","fail","wechatGroupShare","self","Promise","resolve","reject","flag","canvas","toTempFilePathSync","destWidth","destHeight","shareTickets","undefined","e","complete","isHightVersion","setTimeout","WxShare","comeInfo","is_share","idx1","id","imageUrlId"],"mappings":"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","sourceRoot":"/","sourcesContent":["module.exports = {\r\n    shares:\r\n            [\r\n            \"给你几张图，你能猜到我的意思吗？\",\r\n            \"智商150的人才能玩的懂的游戏，你要来挑战自己吗？\",\r\n            \"百因必有果，你的报应就是找我\",\r\n            \"最解压的游戏，还不来放松一下？\",\r\n            \"好友@你并且送了你神秘礼物，点击查看！\",\r\n            ],\r\n    ids:[\r\n            \"IJ8K-FU4Q7GAB5PSmSSp7w\",\r\n            \"VxCAcv-kQKm7XBJAhYV_Pw\",\r\n        ],\r\n    urls:[\r\n            \"https://mmocgame.qpic.cn/wechatgame/2hicsK0eD9ib3RibqpPs4hoPLnNlCdmlPiaq4bn0IJLwQaKVkYNCNFBDSGVz2zvx5HyT/0\",\r\n            \"https://mmocgame.qpic.cn/wechatgame/5VJ9SqQdMn4cPK8EV69iaxjCGHeYz9ne2gMgx4pm8BPtfGr3YXozyB4GcjXMSV5HI/0\",\r\n        ],\r\n    \r\n    //微信分享\r\n        wechatShare() {\r\n            if (CC_WECHATGAME) {\r\n                let idx = Math.floor(Math.random() * this.shares.length);//向下取整\r\n                let str = this.shares[idx];\r\n                wx.shareAppMessage({\r\n                    title: str,\r\n                    imageUrl: wxDownloader.REMOTE_SERVER_ROOT + cc.url.raw('resources/1.png'),\r\n                    success(res) {\r\n                        console.log(\"成功\");\r\n                    },\r\n                    fail(res) {\r\n                        console.log(\"失败\");\r\n                    }\r\n                });\r\n            }\r\n            console.log(\"分享成功\");\r\n        },\r\n    //微信群分享\r\n        wechatGroupShare() {\r\n            var self = this;\r\n            return new Promise((resolve, reject) => {\r\n                if (CC_WECHATGAME) {\r\n                    let flag = false;\r\n                    let idx = Math.floor(Math.random() * self.shares.length);//向下取整\r\n                    let str = self.shares[idx];  \r\n                    wx.shareAppMessage({\r\n                        title: str,\r\n                        imageUrl:canvas.toTempFilePathSync({\r\n                            destWidth: 500,\r\n                            destHeight: 400}),\r\n                        success(res) {\r\n                            if (res.shareTickets != undefined && res.shareTickets.length > 0) {\r\n                                resolve();\r\n                            }\r\n                            \r\n                            console.log(\"成功\");\r\n                        },\r\n                        fail(e) {\r\n                            reject();\r\n                              \r\n                            console.log(\"失败\");\r\n                        },\r\n                        complete() {\r\n                            flag = true;\r\n                        }\r\n                    });\r\n                     \r\n                    if (self.isHightVersion) {\r\n                        setTimeout(function () {\r\n                            if (!flag) {\r\n                                resolve();\r\n                            }\r\n                        }, 2300);\r\n                    }\r\n                } else {\r\n                    resolve();\r\n                }\r\n            })\r\n        },\r\n        WxShare(){\r\n            comeInfo.is_share=true;\r\n            if(CC_WECHATGAME){\r\n                let idx1 = Math.floor(Math.random()*5);//向下取整\r\n                let str = this.shares[idx1];\r\n                let idx = Math.floor(Math.random()*2);//向下取整\r\n                var id = this.ids[idx]; // 通过 MP 系统审核的图片编号\r\n                var url = this.urls[idx]; // 通过 MP 系统审核的图片地址\r\n                wx.shareAppMessage({\r\n                    title:str,\r\n                    imageUrlId:id,\r\n                    imageUrl: url,\r\n                    success(res) {\r\n                        console.log(\"成功\");\r\n                    },\r\n                    fail(res) {\r\n                        console.log(\"失败\");\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }"]}