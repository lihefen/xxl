{"version":3,"sources":["assets/newscripts/Level/LvBnt.js"],"names":["cc","Class","Component","properties","lv","lvLabel","Label","start","InitView","string","gamedata","Lv_star","level_stars","node","getComponent","Sprite","spriteFrame","ZL","lvMgr","lvSpr","Bnt","console","log","Level","mask","active","loader","loadRes","err","res","lvdata","JSON","parse","text","Target","utils","addTips"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,EAAE,EAAE,CADI;AACD;AACPC,IAAAA,OAAO,EAAEL,EAAE,CAACM;AAFJ,GAHP;AAOL;AACAC,EAAAA,KARK,mBAQG,CAAE,CARL;AASL;AACAC,EAAAA,QAVK,oBAUIJ,EAVJ,EAUQ;AACT,SAAKA,EAAL,GAAUA,EAAV;AACA,SAAKC,OAAL,CAAaI,MAAb,GAAsB,KAAKL,EAA3B,CAFS,CAGT;;AACA,QAAI,KAAKA,EAAL,IAAWM,QAAQ,CAACC,OAAxB,EAAiC;AAC7B;AACA;AACA;AACA,UAAI,CAACD,QAAQ,CAACE,WAAT,CAAqB,KAAKR,EAAL,GAAU,CAA/B,CAAL,EAAwC;AACpC,aAAKS,IAAL,CAAUC,YAAV,CAAuBd,EAAE,CAACe,MAA1B,EAAkCC,WAAlC,GAAgDhB,EAAE,CAACiB,EAAH,CAAMC,KAAN,CAAYC,KAAZ,CAAkB,CAAlB,CAAhD;AACH,OAFD,MAEO;AACH,aAAKN,IAAL,CAAUC,YAAV,CAAuBd,EAAE,CAACe,MAA1B,EAAkCC,WAAlC,GACIhB,EAAE,CAACiB,EAAH,CAAMC,KAAN,CAAYC,KAAZ,CAAkBT,QAAQ,CAACE,WAAT,CAAqB,KAAKR,EAAL,GAAU,CAA/B,IAAoC,CAAtD,CADJ;AAEH;AACJ,KAVD,MAUO,IAAI,KAAKA,EAAL,IAAWM,QAAQ,CAACC,OAAT,GAAmB,CAAlC,EAAqC;AACxC;AACA,WAAKE,IAAL,CAAUC,YAAV,CAAuBd,EAAE,CAACe,MAA1B,EAAkCC,WAAlC,GAAgDhB,EAAE,CAACiB,EAAH,CAAMC,KAAN,CAAYC,KAAZ,CAAkB,CAAlB,CAAhD;AACH,KAHM,MAGA;AACH;AACA;AACA,WAAKN,IAAL,CAAUC,YAAV,CAAuBd,EAAE,CAACe,MAA1B,EAAkCC,WAAlC,GAAgDhB,EAAE,CAACiB,EAAH,CAAMC,KAAN,CAAYC,KAAZ,CAAkB,CAAlB,CAAhD;AACH,KArBQ,CAsBT;AACA;AACA;;AACH,GAnCI;AAqCL;AACAC,EAAAA,GAtCK,iBAsCC;AAAA;;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,QAAI,KAAKlB,EAAL,IAAWM,QAAQ,CAACC,OAAT,GAAmB,CAAlC,EAAqC;AACjCX,MAAAA,EAAE,CAACiB,EAAH,CAAMM,KAAN,CAAYC,IAAZ,CAAiBC,MAAjB,GAA0B,IAA1B;AACAzB,MAAAA,EAAE,CAAC0B,MAAH,CAAUC,OAAV,CAAkB,YAAY,KAAKvB,EAAnC,EAAuC,UAACwB,GAAD,EAAMC,GAAN,EAAc;AACjD7B,QAAAA,EAAE,CAACiB,EAAH,CAAMM,KAAN,CAAYC,IAAZ,CAAiBC,MAAjB,GAA0B,KAA1B;;AACA,YAAIG,GAAJ,EAAS;AACLP,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBM,GAAhC;AACH,SAFD,MAEO;AACH;AACAE,UAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,GAAG,CAACI,IAAf,CAAT;AACAH,UAAAA,MAAM,CAAC,KAAD,CAAN,GAAgB,KAAI,CAAC1B,EAArB,CAHG,CAIH;;AACAJ,UAAAA,EAAE,CAACiB,EAAH,CAAMiB,MAAN,CAAa1B,QAAb,CAAsB,KAAI,CAACJ,EAA3B;AACAiB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAAClB,EAAjB,EAAqB,SAArB;AACH;AACJ,OAZD;AAaH,KAfD,MAeO;AACH+B,MAAAA,KAAK,CAACC,OAAN,CAAc,SAAd;AACH;AACJ;AA1DI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lv: 0, //第几关\r\n        lvLabel: cc.Label,\r\n    },\r\n    // onLoad () {},\r\n    start() {},\r\n    // update (dt) {},\r\n    InitView(lv) {\r\n        this.lv = lv;\r\n        this.lvLabel.string = this.lv;\r\n        // console.log(gamedata, 'gamedata');\r\n        if (this.lv <= gamedata.Lv_star) {\r\n            //说明已经通关这一关\r\n            //获取到星星数量\r\n            //let starnum=gamedata.Lv_star[this.lv];\r\n            if (!gamedata.level_stars[this.lv - 1]) {\r\n                this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.lvMgr.lvSpr[5];\r\n            } else {\r\n                this.node.getComponent(cc.Sprite).spriteFrame =\r\n                    cc.ZL.lvMgr.lvSpr[gamedata.level_stars[this.lv - 1] + 1];\r\n            }\r\n        } else if (this.lv == gamedata.Lv_star + 1) {\r\n            //可以玩的一关\r\n            this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.lvMgr.lvSpr[1];\r\n        } else {\r\n            //未通关的\r\n            // this.node.getComponent(cc.Button).interactable=false;\r\n            this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.lvMgr.lvSpr[0];\r\n        }\r\n        // if(lv>comeInfo.totallv){\r\n        //     this.node.getComponent(cc.Button).interactable=false;\r\n        // }\r\n    },\r\n\r\n    //监听点击按钮\r\n    Bnt() {\r\n        console.log('Btn111');\r\n        if (this.lv <= gamedata.Lv_star + 1) {\r\n            cc.ZL.Level.mask.active = true;\r\n            cc.loader.loadRes('levels/' + this.lv, (err, res) => {\r\n                cc.ZL.Level.mask.active = false;\r\n                if (err) {\r\n                    console.log('load res error=' + err);\r\n                } else {\r\n                    // console.log(lvdata['Lv1'])\r\n                    lvdata = JSON.parse(res.text);\r\n                    lvdata['lvl'] = this.lv;\r\n                    // console.log('=====>',lvdatacc)\r\n                    cc.ZL.Target.InitView(this.lv);\r\n                    console.log(this.lv, 'this.lv');\r\n                }\r\n            });\r\n        } else {\r\n            utils.addTips('不可以越级游戏');\r\n        }\r\n    },\r\n});\r\n"]}