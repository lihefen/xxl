{"version":3,"sources":["assets/newscripts/Level/LvMgr.js"],"names":["cc","Class","Component","properties","starSpr","SpriteFrame","lvSpr","tree","Node","TreePrefab","Prefab","nowLv","cloud","onLoad","ZL","lvMgr","getComponent","InitView","start","CreatLv","comeInfo","totallv","creatNewTree","y","instantiate","node","addChild","num","Math","floor","gamedata","Lv_star","t"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACR;AACAC,IAAAA,OAAO,EAAC,CAACJ,EAAE,CAACK,WAAJ,CAFA;AAGR;AACAC,IAAAA,KAAK,EAAC,CAACN,EAAE,CAACK,WAAJ,CAJE;AAKR;AACAE,IAAAA,IAAI,EAACP,EAAE,CAACQ,IANA;AAOR;AACAC,IAAAA,UAAU,EAACT,EAAE,CAACU,MARN;AASR;AACAC,IAAAA,KAAK,EAAC,CAVE;AAaR;AACAC,IAAAA,KAAK,EAACZ,EAAE,CAACU;AAdD,GAHP;AAoBLG,EAAAA,MApBK,oBAoBK;AACN,QAAGb,EAAE,CAACc,EAAH,IAAO,IAAV,EAAe;AACXd,MAAAA,EAAE,CAACc,EAAH,GAAM,EAAN;AACH;;AACDd,IAAAA,EAAE,CAACc,EAAH,CAAMC,KAAN,GAAY,IAAZ,CAJM,CAKN;;AACA,SAAKR,IAAL,CAAUS,YAAV,CAAuB,MAAvB,EAA+BC,QAA/B,CAAwC,KAAKN,KAA7C;AACA,SAAKA,KAAL,GAAY,EAAZ;AACH,GA5BI;AA8BLO,EAAAA,KA9BK,mBA8BI;AACL,SAAKC,OAAL;AACH,GAhCI;AAmCL;AACA;AACAA,EAAAA,OArCK,qBAqCI;AACL,WAAM,IAAN,EAAW;AACP,UAAG,KAAKR,KAAL,GAAWS,QAAQ,CAACC,OAAvB,EAA+B;AAC3B;AACH;;AACD,WAAKC,YAAL;AACH;;AACD,QAAIC,CAAC,GAACvB,EAAE,CAACwB,WAAH,CAAe,KAAKZ,KAApB,CAAN;AACA,SAAKa,IAAL,CAAUC,QAAV,CAAmBH,CAAnB,EARK,CASL;;AACA,QAAII,GAAG,GAACC,IAAI,CAACC,KAAL,CAAWC,QAAQ,CAACC,OAAT,GAAiB,CAA5B,CAAR;AACA,SAAKN,IAAL,CAAUF,CAAV,GAAY,EAAEI,GAAG,GAAC,GAAJ,GAAQ,GAAV,CAAZ;AACH,GAjDI;AAkDL;AACAL,EAAAA,YAnDK,0BAmDS;AACV,QAAIU,CAAC,GAAChC,EAAE,CAACwB,WAAH,CAAe,KAAKf,UAApB,CAAN;AACA,SAAKgB,IAAL,CAAUC,QAAV,CAAmBM,CAAnB;AACAA,IAAAA,CAAC,CAAChB,YAAF,CAAe,MAAf,EAAuBC,QAAvB,CAAgC,KAAKN,KAArC;AACA,SAAKA,KAAL,GAAY,KAAKA,KAAL,GAAW,EAAvB;AACH;AAxDI,CAAT","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //星星纹理\r\n        starSpr:[cc.SpriteFrame],\r\n        //关卡背景\r\n        lvSpr:[cc.SpriteFrame],\r\n        //第一节树\r\n        tree:cc.Node,\r\n        //关卡预制体\r\n        TreePrefab:cc.Prefab,\r\n        //当前生成了几关\r\n        nowLv:1,\r\n\r\n\r\n        //云彩（结尾过度用）\r\n        cloud:cc.Prefab,\r\n    },\r\n\r\n    onLoad () {\r\n        if(cc.ZL==null){\r\n            cc.ZL={};\r\n        }\r\n        cc.ZL.lvMgr=this;\r\n        //初始化第一课树的数据\r\n        this.tree.getComponent(\"Tree\").InitView(this.nowLv);\r\n        this.nowLv =17;\r\n    },\r\n\r\n    start () {\r\n        this.CreatLv();\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n    //生成关卡\r\n    CreatLv(){\r\n        while(true){\r\n            if(this.nowLv>comeInfo.totallv){\r\n                break;\r\n            }\r\n            this.creatNewTree();\r\n        }\r\n        let y=cc.instantiate(this.cloud);\r\n        this.node.addChild(y);\r\n        //查看玩了多少关\r\n        let num=Math.floor(gamedata.Lv_star/3);\r\n        this.node.y=-(num*180-300);\r\n    },\r\n    //生成一个新树\r\n    creatNewTree(){\r\n        let t=cc.instantiate(this.TreePrefab);\r\n        this.node.addChild(t);\r\n        t.getComponent(\"Tree\").InitView(this.nowLv);\r\n        this.nowLv =this.nowLv+15;\r\n    },\r\n});\r\n"]}