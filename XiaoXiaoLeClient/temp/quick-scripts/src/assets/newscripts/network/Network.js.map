{"version":3,"sources":["assets/newscripts/network/Network.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\n\nimport { Http } from \"./Http\";\n\n\nexport class Network {\n    private _httpurl: string = 'https://www.9xiu.com';\n\n    public inConnecting = false;\n\n    private Utf8ArrayToStr(array) {\n        var out, i, len, c;\n        var char2, char3;\n\n        out = \"\";\n        len = array.length;\n        i = 0;\n        while (i < len) {\n            c = array[i++];\n            switch (c >> 4) {\n                case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\n                    // 0xxxxxxx\n                    out += String.fromCharCode(c);\n                    break;\n                case 12: case 13:\n                    // 110x xxxx   10xx xxxx\n                    char2 = array[i++];\n                    out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\n                    break;\n                case 14:\n                    // 1110 xxxx  10xx xxxx  10xx xxxx\n                    char2 = array[i++];\n                    char3 = array[i++];\n                    out += String.fromCharCode(((c & 0x0F) << 12) |\n                        ((char2 & 0x3F) << 6) |\n                        ((char3 & 0x3F) << 0));\n                    break;\n            }\n        }\n\n        return out;\n    }\n    public ab2str(buf) {\n        return String.fromCharCode.apply(null, new Uint8Array(buf));\n    }\n\n    private str2UTF8(str) {\n        var bytes = new Array();\n        var len, c;\n        len = str.length;\n        for (var i = 0; i < len; i++) {\n            c = str.charCodeAt(i);\n            if (c >= 0x010000 && c <= 0x10FFFF) {\n                bytes.push(((c >> 18) & 0x07) | 0xF0);\n                bytes.push(((c >> 12) & 0x3F) | 0x80);\n                bytes.push(((c >> 6) & 0x3F) | 0x80);\n                bytes.push((c & 0x3F) | 0x80);\n            } else if (c >= 0x000800 && c <= 0x00FFFF) {\n                bytes.push(((c >> 12) & 0x0F) | 0xE0);\n                bytes.push(((c >> 6) & 0x3F) | 0x80);\n                bytes.push((c & 0x3F) | 0x80);\n            } else if (c >= 0x000080 && c <= 0x0007FF) {\n                bytes.push(((c >> 6) & 0x1F) | 0xC0);\n                bytes.push((c & 0x3F) | 0x80);\n            } else {\n                bytes.push(c & 0xFF);\n            }\n        }\n        return bytes;\n    }\n\n    public obj_contact(obj) {\n        var s = \"\";\n        for (var k in obj) {\n            let v = obj[k];\n            if (s.length == 0) {\n                s += \"?\" + k + \"=\" + v;\n            } else {\n                s += \"&\" + k + \"=\" + v;\n            }\n        }\n        return s;\n    }\n\n    //http请求\n    public httpSend(cmd, params, onBack) {\n        var self = this;\n        var param = self.obj_contact(params);\n        var url = encodeURI(self._httpurl + \"/\" + cmd + param);\n        Http.get(url, function (eventName: string, xhr: XMLHttpRequest) {\n            if (eventName == 'COMPLETE') {\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                    var response = JSON.parse(xhr.responseText)\n                    if (onBack) {\n                        onBack(response);\n                    }\n                }\n            } else if (eventName == 'TIMEOUT') {\n                //TODO:添加提示连接网关超时\n                this.et.emit('TIMEOUT', {})\n                cc.log(\"添加提示连接网关超时\")\n            } else if (eventName == 'ERROR') {\n                //TODO:添加提示连接网关发生错误\n                cc.log(\"添加提示连接网关发生错误\")\n            }\n        }, this);\n    }\n\n    public httpConnect_post_async(urls, params: any, onBack: Function) {//异步httppost\n        var self = this;\n        var url = encodeURI(self._httpurl + \"/\" + urls);\n        console.log('url', url)\n        Http.post(url, params, function (eventName: string, xhr: XMLHttpRequest) {\n            if (eventName == 'COMPLETE') {\n                if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                    var response = JSON.parse(xhr.responseText)\n                    console.log('_____httpPost:', response)\n                    if (onBack) {\n                        onBack(response);\n                    }\n                }\n            } else if (eventName == 'TIMEOUT') {\n                //TODO:添加提示连接网关超时\n                this.et.emit('TIMEOUT', {})\n                cc.log(\"添加提示连接网关超时\")\n            } else if (eventName == 'ERROR') {\n                //TODO:添加提示连接网关发生错误\n                cc.log(\"添加提示连接网关发生错误\")\n            }\n        }, this);\n    }\n}"]}