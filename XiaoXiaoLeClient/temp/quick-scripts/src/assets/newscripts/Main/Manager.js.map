{"version":3,"sources":["assets/newscripts/Main/Manager.js"],"names":["cc","Class","Component","properties","music","type","AudioClip","setting","setPrefab","Prefab","zanting","Node","kaishi","onLoad","ZL","musicMgr","ismusic","director","on","onCloseNode","active","animMgr","onCloseMask","start","cubeMgr","InitCube","InitAnimal","iceMgr","InitIce","InitUPAnim","MyplayMusic","num","isBool","gamedata","audioEngine","play","OpenSetting","onOpenMask","instantiate","node","addChild","getComponent","Open","PlayMusicOnly","setTimeout","bind","ReturnLevel","loadScene","onDisable","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        music: {\r\n            type: cc.AudioClip,\r\n            default: [],\r\n        },\r\n\r\n        //设置面板\r\n        setting: null,\r\n        setPrefab: cc.Prefab,\r\n\r\n        zanting: cc.Node,\r\n        kaishi: cc.Node\r\n    },\r\n\r\n    onLoad() {\r\n        if (cc.ZL == null) {\r\n            cc.ZL = {}\r\n        }\r\n        cc.ZL.musicMgr = this;\r\n        this.ismusic = false;\r\n        cc.director.on('closeHome', this.onCloseNode, this);\r\n    },\r\n    onCloseNode() {\r\n        this.zanting.active = true;\r\n        this.kaishi.active = false;\r\n        cc.ZL.animMgr.onCloseMask();\r\n    },\r\n\r\n    start() {\r\n        cc.ZL.cubeMgr.InitCube();\r\n        cc.ZL.animMgr.InitAnimal();\r\n        cc.ZL.iceMgr.InitIce();\r\n        cc.ZL.iceMgr.InitUPAnim();\r\n    },\r\n\r\n    // update (dt) {},\r\n    MyplayMusic(num, isBool) {\r\n        if (gamedata.music) {\r\n            cc.audioEngine.play(this.music[num], isBool, 0.5);\r\n        }\r\n    },\r\n    //打开设置面板\r\n    OpenSetting() {\r\n        cc.ZL.animMgr.onOpenMask();\r\n        this.zanting.active = false;\r\n        this.kaishi.active = true;\r\n        if (this.setting == null) {\r\n            this.setting = cc.instantiate(this.setPrefab);\r\n            this.node.addChild(this.setting);\r\n        }\r\n        this.setting.getComponent(\"HomeSettign\").Open();\r\n    },\r\n    //播放碎冰音效（限制只播放一次）\r\n    PlayMusicOnly(num, isBool) {\r\n        if (this.ismusic) {\r\n            return;\r\n        }\r\n        this.ismusic = true;\r\n        if (gamedata.music) {\r\n            cc.audioEngine.play(this.music[num], isBool, 0.5);\r\n        }\r\n        setTimeout(function () {\r\n            this.ismusic = false;\r\n        }.bind(this), 200);\r\n    },\r\n    ReturnLevel() {\r\n        cc.director.loadScene(\"newLevel\");\r\n    },\r\n    onDisable() {\r\n        cc.director.off('closeHome', this.onCloseNode, this);\r\n    }\r\n});\r\n"]}