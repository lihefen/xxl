{"version":3,"sources":["assets/newscripts/Main/Scuess.js"],"names":["cc","Class","Component","properties","circlebg","Node","scoreLabel","Label","goldLabel","Stars","onLoad","start","update","dt","angle","InitView","ZL","musicMgr","MyplayMusic","node","runAction","scaleTo","string","UIMgr","_score","Math","floor","showstars","num","GetStarNum","BigSmall","setTimeout","bind","comeInfo","now_lv","gamedata","Lv_star","bc_Star","fn1","fn2","sqn","sequence","DoubleGold","gold","bc_gold","director","loadScene","NormalGold","getChildByName","getComponent","Button","interactable","NextHall","event","Number","utils","addTips","ShowLoading","Level","OpenMask","console","log","loader","loadRes","err","res","lvdata","JSON","parse","text","Target"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //旋转的背景\r\n        circlebg: cc.Node,\r\n        //分数\r\n        scoreLabel: cc.Label,\r\n        goldLabel: cc.Label,\r\n        //三组星星\r\n        Stars: [cc.Node],\r\n    },\r\n\r\n    onLoad() {\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        this.circlebg.angle += 60 * dt;\r\n    },\r\n    InitView() {\r\n        cc.ZL.musicMgr.MyplayMusic(26, false);\r\n        this.node.runAction(cc.scaleTo(0.2, 1, 1));\r\n        this.scoreLabel.string = cc.ZL.UIMgr._score;\r\n        this.goldLabel.string = Math.floor(cc.ZL.UIMgr._score / 1000);\r\n        this.showstars();\r\n    },\r\n    showstars() {\r\n        let num = cc.ZL.UIMgr.GetStarNum();\r\n        // let num=3;\r\n        if (num == 1) {\r\n            cc.ZL.musicMgr.MyplayMusic(17, false);\r\n            this.BigSmall(this.Stars[0]);\r\n        } else if (num == 2) {\r\n            cc.ZL.musicMgr.MyplayMusic(17, false);\r\n            this.BigSmall(this.Stars[0]);\r\n            setTimeout(function () {\r\n                cc.ZL.musicMgr.MyplayMusic(18, false);\r\n                this.BigSmall(this.Stars[1]);\r\n            }.bind(this), 300);\r\n\r\n        } else if (num == 3) {\r\n            cc.ZL.musicMgr.MyplayMusic(17, false);\r\n            this.BigSmall(this.Stars[0]);\r\n            setTimeout(function () {\r\n                cc.ZL.musicMgr.MyplayMusic(18, false);\r\n                this.BigSmall(this.Stars[1]);\r\n                setTimeout(function () {\r\n                    cc.ZL.musicMgr.MyplayMusic(19, false);\r\n                    this.BigSmall(this.Stars[2]);\r\n                }.bind(this), 300);\r\n            }.bind(this), 300);\r\n\r\n        }\r\n        //gamedata.Lv_star[comeInfo.now_lv]=num;\r\n        if (comeInfo.now_lv >= gamedata.Lv_star) {\r\n            gamedata.Lv_star = comeInfo.now_lv;\r\n            gamedata.bc_Star();\r\n        }\r\n\r\n    },\r\n    //星星变大缩小\r\n    BigSmall(node) {\r\n        let fn1 = cc.scaleTo(0.2, 1.5, 1.5);\r\n        let fn2 = cc.scaleTo(0.1, 1, 1);\r\n        let sqn = cc.sequence(fn1, fn2);\r\n        node.runAction(sqn);\r\n    },\r\n    //双倍领取\r\n    DoubleGold() {\r\n        cc.ZL.musicMgr.MyplayMusic(0, false);\r\n        gamedata.gold += Math.floor(cc.ZL.UIMgr._score / 1000) * 2;\r\n        gamedata.bc_gold();\r\n        cc.director.loadScene(\"newLevel\");\r\n    },\r\n    //普通领取\r\n    NormalGold() {\r\n        this.node.getChildByName('normalGold').getComponent(cc.Button).interactable = false;\r\n        this.node.getChildByName('next').getComponent(cc.Button).interactable = false;\r\n        cc.ZL.musicMgr.MyplayMusic(0, false);\r\n        gamedata.gold += Math.floor(cc.ZL.UIMgr._score / 1000);\r\n        gamedata.bc_gold();\r\n        cc.director.loadScene(\"newLevel\");\r\n    },\r\n    NextHall(event) {\r\n        if(Number(comeInfo.now_lv) == 500) {\r\n            utils.addTips('已经是最后一关啦！');\r\n            return;\r\n        }\r\n        this.node.getChildByName('normalGold').getComponent(cc.Button).interactable = false;\r\n        this.node.getChildByName('next').getComponent(cc.Button).interactable = false;\r\n        cc.ZL.musicMgr.MyplayMusic(0, false);\r\n        gamedata.gold += Math.floor(cc.ZL.UIMgr._score / 1000);\r\n        gamedata.bc_gold();\r\n        utils.ShowLoading();\r\n        cc.director.loadScene(\"newLevel\", () => {\r\n            cc.ZL.Level.OpenMask();\r\n            console.log('OpenMask')\r\n            cc.loader.loadRes('levels/' + (Number(comeInfo.now_lv) + 1), (err, res) => {\r\n                if (err) {\r\n                    this.node.getChildByName('normalGold').getComponent(cc.Button).interactable = true;\r\n                    this.node.getChildByName('next').getComponent(cc.Button).interactable = true;\r\n                    console.log(\"load res error=\" + err);\r\n                } else {\r\n                    // console.log(lvdata['Lv1'])\r\n                    // setTimeout(function () {\r\n                        lvdata = JSON.parse(res.text);\r\n                        // console.log('=====>',lvdatacc)\r\n                        cc.ZL.Target.InitView((Number(comeInfo.now_lv) + 1));\r\n                    // }, 1000);\r\n                }\r\n            })\r\n        });\r\n    }\r\n});\r\n"]}