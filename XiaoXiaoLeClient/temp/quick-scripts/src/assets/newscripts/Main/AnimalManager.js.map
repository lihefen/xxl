{"version":3,"sources":["assets/newscripts/Main/AnimalManager.js"],"names":["cc","Class","Component","properties","animPrefab","Prefab","animalPanel","Node","animalArray","selectLogo","_firstNode","_sectedNode","prop_one","prop_two","mask","maskNode","is_Finised","clearnum","NoAnimNode","onLoad","ZL","animMgr","animalPool","NodePool","info","lvdata","active","onOpenMask","onCloseMask","start","IsNoMatch","InitAnimal","Array","row","Anim","length","rowArray","column","push","a","instantiate","addChild","getComponent","initAnimal","SetEff","NewFilled","i","animRow","j","len","anim","can_move","searchPos","creatNew","x","y","isFilled","creat","cols","AnimMove","targetMgr","IsScuessed","FillOver","requestAnimationFrame","is_Matc","AllMatch","CM","InitView","iceMgr","qqmoveNum","UPAllMove","setTimeout","isEnd","IsScuess","bind","comeInfo","qqmoveTime","clearOverFiled","isMatched","list","MatchOne","console","log","RemoveAnimList","self","search","rowNum","columnNum","AddPos","dir","next_x","next_animal","FilledMove","selectFirstAnimal","pos","animal","stopAnim","playAnim","setPosition","node","getPosition","isFriend","changePos","friend","f_x","f_y","s_x","s_y","Math","abs","ismatch","musicMgr","MyplayMusic","MatchClear","animalMoveTime","delay_clear","clearType_first","clearType","clearType_second","UIMgr","MinusStep","clear","animalClearTime","animType","fn1","scaleTo","easing","easeElasticOut","fn2","fadeOut","runAction","sequence","spawn","atype","clearTypeall","creatRowEff","creatColnumEff","CreatTEff","fn3","fn4","node1","node2","list_one","list_two","Rlist","Clist","MList","rownum","columnnum","animalType","noOpen","none","next_y","matchtype","cType","specialRemove","type","deleteMuBiao","CreatFiveEff","r_column","r_row","effarry","eff","RowClear","ColumnClear","RangeClear","totalList","TypeClear","animaltype","proChangePos","scale","o_x","o_y","t_x","t_y","PropMgr","propFinished","replaceAll","posArr","AnimArr2","lastIndex","index","floor","random","temp","isDie","type1","IsFirstLineCast","type2","IsSecondLineCast","type3","IsThirdLineCast","type4","IsSameRowCol","lx","ly","tx","ty","isLeftBottomSame","isLeftTopSame","isRightBottomSame","isRightTopSame","add1","add2","add3","addc1","addc2","addc3"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        animPrefab: cc.Prefab,\r\n        //动物容器\r\n        animalPanel: cc.Node,\r\n        //动物数组\r\n        animalArray: null,\r\n        //选中logo\r\n        selectLogo: cc.Node,\r\n        _firstNode: null,\r\n        _sectedNode: null,\r\n        //道具第一次，第二次\r\n        prop_one: null,\r\n        prop_two: null,\r\n        mask: cc.Node,\r\n        maskNode: cc.Node,\r\n        //限制只填充完成一次\r\n        is_Finised: false, //消除时变为false\r\n        //连续消除次数\r\n        clearnum: 0,\r\n\r\n        //提示无动物可消除\r\n        NoAnimNode: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        cc.ZL.animMgr = this;\r\n        //创建动物缓冲池\r\n        this.animalPool = new cc.NodePool();\r\n        // this.info=lvdata[\"Lv\"+comeInfo.now_lv];//获取到这一关的信息\r\n        this.info = lvdata; //获取到这一关的信息\r\n        this.NoAnimNode.active = false;\r\n    },\r\n\r\n    onOpenMask() {\r\n        this.maskNode.active = true;\r\n    },\r\n    onCloseMask() {\r\n        this.maskNode.active = false;\r\n    },\r\n\r\n    start() {\r\n        this.IsNoMatch();\r\n    },\r\n    //实例化动物\r\n    InitAnimal() {\r\n        this.animalArray = new Array();\r\n        for (let row = 0; row < this.info.Anim.length; row++) {\r\n            let rowArray = new Array();\r\n            for (let column = 0; column < this.info.Anim[row].length; column++) {\r\n                //查看是否有动物\r\n                // if(lvdata[\"Lv\"+comeInfo.now_lv].Anim[row][column]==0){\r\n                //     rowArray.push(-1);\r\n                // }else if(lvdata[\"Lv\"+comeInfo.now_lv].Anim[row][column]==-1){\r\n                //     rowArray.push(0);\r\n                // }\r\n                if (lvdata.Anim[row][column] == 0) {\r\n                    rowArray.push(-1);\r\n                } else if (lvdata.Anim[row][column] == -1) {\r\n                    rowArray.push(0);\r\n                } else {\r\n                    let a = cc.instantiate(this.animPrefab);\r\n                    this.animalPanel.addChild(a);\r\n                    a.getComponent('Animal').initAnimal(column, row, this);\r\n                    rowArray.push(a.getComponent('Animal'));\r\n                }\r\n            }\r\n            this.animalArray.push(rowArray);\r\n        }\r\n        this.SetEff();\r\n    },\r\n    // update (dt) {},\r\n    //-----------填充------------------------------------\r\n    //填充方式\r\n    NewFilled() {\r\n        // console.log(this.info.Anim, 'this.info.Anim');\r\n        //遍历格子中有的动物\r\n\r\n        // 优化前代码\r\n        // for (let i = this.info.Anim.length - 2; i >= 0; i--) {\r\n        //     for (let j = 0; j < this.info.Anim[i].length; j++) {\r\n        //         let anim = this.animalArray[i][j];\r\n        //         if (anim == 0 || anim == -1) {\r\n        //             continue;\r\n        //         }\r\n        //         if (anim.can_move) {\r\n        //             this.searchPos(anim);\r\n        //         }\r\n        //     }\r\n        // }\r\n\r\n        // chatgpt优化后代码\r\n        for (let i = this.info.Anim.length - 2; i >= 0; i--) {\r\n            let animRow = this.animalArray[i];\r\n            for (let j = 0, len = animRow.length; j < len; j++) {\r\n                let anim = animRow[j];\r\n                if (anim && anim.can_move) {\r\n                    this.searchPos(anim);\r\n                }\r\n            }\r\n        }\r\n\r\n        // for (let i = this.info.Anim.length - 2; i >= 0; i--) {\r\n        //     //从倒数第二排查找\r\n        //     for (let j = 0; j < this.info.Anim[i].length; j++) {\r\n        //         let anim = this.animalArray[i][j]; //得到这个动物\r\n        //         if (anim == 0 || anim == -1) {\r\n        //             console.log('空格子或者未启用的格子');\r\n        //             //空格子或者未启用的格子\r\n        //             continue;\r\n        //         }\r\n        //         //查看他是否可以下移\r\n        //         if (anim.can_move) {\r\n        //             //就寻找他能移动到哪里\r\n        //             console.log('就寻找他能移动到哪里');\r\n        //             this.searchPos(anim);\r\n        //         }\r\n        //     }\r\n        // }\r\n        this.creatNew();\r\n    },\r\n    //TODO: 下面是通过chatgpt优化后的代码\r\n    creatNew() {\r\n        let x, y;\r\n        let isFilled = true;\r\n        for (let i = 0; i < this.info.creat.length; i++) {\r\n            x = this.info.creat[i][1];\r\n            y = this.info.creat[i][0];\r\n            if (this.animalArray[y * this.info.cols + x] == 0) {\r\n                let a = cc.instantiate(this.animPrefab);\r\n                this.animalPanel.addChild(a);\r\n                a.getComponent('Animal').initAnimal(x, y - 1, this);\r\n                a.getComponent('Animal').AnimMove(x, y);\r\n                this.animalArray[y * this.info.cols + x] = a.getComponent('Animal');\r\n                this.searchPos(this.animalArray[y * this.info.cols + x]);\r\n                isFilled = false;\r\n            }\r\n        }\r\n        if (isFilled) {\r\n            if (cc.ZL.targetMgr.IsScuessed) {\r\n                return;\r\n            }\r\n            this.FillOver();\r\n        } else {\r\n            requestAnimationFrame(() => {\r\n                this.creatNew();\r\n            });\r\n        }\r\n    },\r\n    // TODO:下面是优化前的代码\r\n    // creatNew() {\r\n    //     //如果自主产生动物的格子为空就产生动物\r\n    //     let x, y;\r\n    //     let isFiled = true;\r\n    //     for (let i = 0; i < this.info.creat.length; i++) {\r\n    //         x = this.info.creat[i][1];\r\n    //         y = this.info.creat[i][0];\r\n    //         if (this.animalArray[y][x] == 0) {\r\n    //             let a = cc.instantiate(this.animPrefab);\r\n    //             this.animalPanel.addChild(a);\r\n    //             a.getComponent('Animal').initAnimal(x, y - 1, this);\r\n    //             a.getComponent('Animal').AnimMove(x, y);\r\n    //             this.animalArray[y][x] = a.getComponent('Animal');\r\n    //             this.searchPos(this.animalArray[y][x]);\r\n    //             isFiled = false;\r\n    //         }\r\n    //     }\r\n    //     setTimeout(\r\n    //         function () {\r\n    //             if (isFiled) {\r\n    //                 //填充完成\r\n    //                 if (cc.ZL.targetMgr.IsScuessed) {\r\n    //                     return;\r\n    //                 }\r\n    //                 this.FillOver();\r\n    //                 return;\r\n    //             }\r\n    //             this.creatNew();\r\n    //         }.bind(this),\r\n    //         comeInfo.animalMoveTime * 1000\r\n    //     );\r\n    // },\r\n\r\n    //填充完成后的后续操作\r\n    FillOver() {\r\n        let is_Matc = this.AllMatch();\r\n        if (!is_Matc) {\r\n            //无需要消除的\r\n            this._firstNode = null;\r\n            this._sectedNode = null;\r\n            this.selectLogo.active = false;\r\n            this.mask.active = false;\r\n            cc.ZL.CM.InitView(this.clearnum); //设置音效\r\n            this.clearnum = 0;\r\n            if (cc.ZL.iceMgr.qqmoveNum > 0) {\r\n                //需要球球移动\r\n                cc.ZL.iceMgr.UPAllMove();\r\n                setTimeout(\r\n                    function () {\r\n                        //判断是否胜利\r\n                        let isEnd = cc.ZL.targetMgr.IsScuess();\r\n                        if (isEnd == false) {\r\n                            //如果没有结束就看看有没有可消除的动物\r\n                            this.IsNoMatch();\r\n                        }\r\n                    }.bind(this),\r\n                    comeInfo.qqmoveTime * 1500\r\n                );\r\n            } else {\r\n                //判断是否胜利\r\n                let isEnd = cc.ZL.targetMgr.IsScuess();\r\n                if (isEnd == false) {\r\n                    //如果没有结束就看看有没有可消除的动物\r\n                    setTimeout(\r\n                        function () {\r\n                            this.IsNoMatch();\r\n                        }.bind(this),\r\n                        500\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            this.clearOverFiled();\r\n        }\r\n    },\r\n    //填充以后全部匹配一下，看看有么有需要消除的地方\r\n    AllMatch() {\r\n        let isMatched = false;\r\n        for (let row = 0; row < this.info.Anim.length; row++) {\r\n            for (let column = 0; column < this.info.Anim[row].length; column++) {\r\n                if (this.animalArray[row][column] != -1 && this.animalArray[row][column] != 0) {\r\n                    let list = this.MatchOne(this.animalArray[row][column]);\r\n                    if (list.length > 0) {\r\n                        console.log('有能消除的东西', list);\r\n                        this.RemoveAnimList(list);\r\n                        isMatched = true;\r\n                        return isMatched;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isMatched;\r\n    },\r\n    //搜寻最终可移动到的地方\r\n    searchPos(anim) {\r\n        let self = this;\r\n        let search = function (anim) {\r\n            let i = anim.rowNum;\r\n            let j = anim.columnNum;\r\n\r\n            if (i > self.animalArray.length - 2) {\r\n                //防止超越下方边界\r\n                return false;\r\n            }\r\n            //查看下方是否是空物体\r\n            if (self.animalArray[i + 1][j] == 0) {\r\n                //如果是就下移\r\n                self.animalArray[i][j].AddPos(j, i + 1);\r\n                self.animalArray[i][j] = 0;\r\n                return true;\r\n            } else {\r\n                //查看左右下方是否为空\r\n                for (let dir = 1; dir >= -1; dir -= 2) {\r\n                    let next_x = j + dir;\r\n                    //防止超出数组边界\r\n                    if (next_x < 0 && next_x > self.info.Anim[i].length) {\r\n                        continue;\r\n                    }\r\n                    //获取动物数组中的位置\r\n                    let next_animal = self.animalArray[i + 1][next_x];\r\n                    if (next_animal == 0) {\r\n                        ///如果是空格子\r\n                        //上方不为空\r\n                        if (self.animalArray[i][next_x] != 0) {\r\n                            //如果上方无格子或者上方不能移动也可以填充\r\n                            if (self.animalArray[i][next_x] == -1 || self.animalArray[i][next_x].can_move == false) {\r\n                                self.animalArray[i][j].AddPos(next_x, i + 1);\r\n                                self.animalArray[i][j] = 0;\r\n                                return true;\r\n                            }\r\n                        } else {\r\n                            //上方第2个也为空\r\n                            if (i - 1 < 0) {\r\n                                continue;\r\n                            }\r\n                            if (\r\n                                self.animalArray[i - 1][next_x] == -1 ||\r\n                                self.animalArray[i - 1][next_x].can_move == false\r\n                            ) {\r\n                                self.animalArray[i][j].AddPos(next_x, i + 1);\r\n                                self.animalArray[i][j] = 0;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n        if (search(anim)) {\r\n            //如果能移动就继续找下一个\r\n            this.searchPos(anim);\r\n        } else {\r\n            //如果找到了最后一个点就开始\r\n            anim.FilledMove();\r\n        }\r\n    },\r\n    //---------------------------------------------------------------\r\n    //动物选中\r\n    selectFirstAnimal(pos) {\r\n        let animal = this.animalArray[pos.y][pos.x];\r\n        if (animal == -1 || animal == 0) {\r\n            //如果是空格子或者未启用\r\n            return;\r\n        }\r\n        if (!animal.can_move) {\r\n            //不能选不能移动的\r\n            animal.stopAnim();\r\n            return;\r\n        }\r\n        if (this._firstNode == null) {\r\n            this._firstNode = animal;\r\n            this._firstNode.playAnim(0);\r\n            this.selectLogo.setPosition(animal.node.getPosition());\r\n            this.selectLogo.active = true;\r\n        } else {\r\n            if (this._firstNode == animal) {\r\n                //重复点击\r\n                return;\r\n            } else if (this._sectedNode == null) {\r\n                this._sectedNode = animal;\r\n                this._sectedNode.stopAnim();\r\n                this._firstNode.stopAnim();\r\n                if (this.isFriend()) {\r\n                    //相邻\r\n                    this.mask.active = true;\r\n                    this.changePos(true);\r\n                } else {\r\n                    //不相邻\r\n                    this._firstNode = animal;\r\n                    this._firstNode.playAnim(0);\r\n                    this.selectLogo.setPosition(animal.node.getPosition());\r\n                    this._sectedNode = null;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //判断2个动物是否相邻\r\n    isFriend() {\r\n        if (this._firstNode != null && this._sectedNode != null) {\r\n            let friend = false;\r\n            let f_x = this._firstNode.columnNum;\r\n            let f_y = this._firstNode.rowNum;\r\n            let s_x = this._sectedNode.columnNum;\r\n            let s_y = this._sectedNode.rowNum;\r\n            if (f_x == s_x) {\r\n                if (Math.abs(f_y - s_y) == 1) {\r\n                    friend = true;\r\n                }\r\n            } else if (f_y == s_y) {\r\n                if (Math.abs(f_x - s_x) == 1) {\r\n                    friend = true;\r\n                }\r\n            }\r\n            return friend;\r\n        }\r\n    },\r\n    //动物交换  (是否去匹配消除)\r\n    changePos(ismatch) {\r\n        let f_x = this._firstNode.columnNum;\r\n        let f_y = this._firstNode.rowNum;\r\n        let s_x = this._sectedNode.columnNum;\r\n        let s_y = this._sectedNode.rowNum;\r\n        cc.ZL.musicMgr.MyplayMusic(1, false); //播放点击音效\r\n        this._firstNode.AnimMove(s_x, s_y);\r\n        this._sectedNode.AnimMove(f_x, f_y);\r\n        //移动玩在进行消除\r\n        if (ismatch) {\r\n            setTimeout(\r\n                function () {\r\n                    this.MatchClear();\r\n                }.bind(this),\r\n                (comeInfo.animalMoveTime + comeInfo.delay_clear) * 1000\r\n            );\r\n        }\r\n    },\r\n    //根据类型来特殊消除或者匹配消除\r\n    MatchClear() {\r\n        /**\r\n         * 1、一个特殊和一个普通或者2个普通\r\n         * 2、2个特殊鸟\r\n         * 3、一个魔力鸟和一个普通的鸟\r\n         * 4、一个魔力鸟和一个特殊鸟\r\n         * 5、2个魔力鸟\r\n         */\r\n        //cc.ZL.musicMgr.MyplayMusic(1,false);\r\n        let clearType_first = this._firstNode.clearType;\r\n        let clearType_second = this._sectedNode.clearType;\r\n        if ((clearType_first != 4 && clearType_second == 0) || (clearType_first == 0 && clearType_second != 4)) {\r\n            //    cc.ZL.UIMgr.MinusStep();\r\n            //普通匹配消除\r\n            this.Math(this._firstNode, this._sectedNode);\r\n        } else if (clearType_first != 4 && clearType_first != 0 && clearType_second != 4 && clearType_second != 0) {\r\n            cc.ZL.UIMgr.MinusStep();\r\n            //2个特效节点全部消除\r\n            console.log('111111111111');\r\n            this._firstNode.clear();\r\n            this._sectedNode.clear();\r\n            //消除完成后填充\r\n            setTimeout(\r\n                function () {\r\n                    this.NewFilled(false);\r\n                }.bind(this),\r\n                comeInfo.animalClearTime * 1000 + 100\r\n            );\r\n        } else if ((clearType_first == 4 && clearType_second == 0) || (clearType_first == 0 && clearType_second == 4)) {\r\n            cc.ZL.UIMgr.MinusStep();\r\n            cc.ZL.musicMgr.MyplayMusic(27, false);\r\n            if (clearType_second == 4) {\r\n                this._sectedNode.animType = this._firstNode.animType;\r\n                let fn1 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n                let fn2 = cc.fadeOut(1);\r\n                this._sectedNode.node.runAction(cc.sequence(fn1, fn2));\r\n                setTimeout(\r\n                    function () {\r\n                        console.log('222222222222');\r\n                        this._sectedNode.clear();\r\n                    }.bind(this),\r\n                    800\r\n                );\r\n            } else {\r\n                this._firstNode.animType = this._sectedNode.animType;\r\n                let fn1 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n                let fn2 = cc.fadeOut(1);\r\n                this._firstNode.node.runAction(cc.spawn(fn1, fn2));\r\n                setTimeout(\r\n                    function () {\r\n                        console.log('333333333333');\r\n                        this._firstNode.clear();\r\n                    }.bind(this),\r\n                    800\r\n                );\r\n            }\r\n            //消除完成后填充\r\n            setTimeout(\r\n                function () {\r\n                    this.NewFilled(false);\r\n                }.bind(this),\r\n                comeInfo.animalClearTime * 1000 + 800\r\n            );\r\n        } else if (\r\n            (clearType_first == 4 && clearType_second != 0 && clearType_second != 4) ||\r\n            (clearType_second == 4 && clearType_first != 0 && clearType_first != 4)\r\n        ) {\r\n            cc.ZL.UIMgr.MinusStep();\r\n            //要消除的鸟的类型,消除方式\r\n            let atype, clearTypeall;\r\n            cc.ZL.musicMgr.MyplayMusic(27, false);\r\n            if (clearType_first == 4) {\r\n                atype = this._sectedNode.animType;\r\n                clearTypeall = clearType_second;\r\n                let fn1 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n                let fn2 = cc.fadeOut(1);\r\n                this._firstNode.node.runAction(cc.sequence(fn1, fn2));\r\n            } else {\r\n                atype = this._firstNode.animType;\r\n                clearTypeall = clearType_first;\r\n                let fn1 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n                let fn2 = cc.fadeOut(1);\r\n                this._sectedNode.node.runAction(cc.sequence(fn1, fn2));\r\n            }\r\n            setTimeout(\r\n                function () {\r\n                    for (let i = 0; i < comeInfo.row; i++) {\r\n                        for (let j = 0; j < comeInfo.column; j++) {\r\n                            //排除空格子和不启用\r\n                            if (this.animalArray[i][j] != 0 && this.animalArray[i][j] != -1) {\r\n                                if (this.animalArray[i][j].animType == atype) {\r\n                                    // this.animalArray[i][j].clearType=clearTypeall;\r\n                                    // this.animalArray[i][j].clear();\r\n                                    if (clearTypeall == 1) {\r\n                                        this.animalArray[i][j].creatRowEff(true);\r\n                                    } else if (clearTypeall == 2) {\r\n                                        this.animalArray[i][j].creatColnumEff(true);\r\n                                    } else if (clearTypeall == 3) {\r\n                                        this.animalArray[i][j].CreatTEff();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    setTimeout(\r\n                        function () {\r\n                            for (let i = 0; i < comeInfo.row; i++) {\r\n                                for (let j = 0; j < comeInfo.column; j++) {\r\n                                    //排除空格子和不启用\r\n                                    if (this.animalArray[i][j] != 0 && this.animalArray[i][j] != -1) {\r\n                                        if (this.animalArray[i][j].animType == atype) {\r\n                                            console.log('4444444444444');\r\n                                            this.animalArray[i][j].clear();\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }.bind(this),\r\n                        200\r\n                    );\r\n                    //消除完成后填充\r\n                    setTimeout(\r\n                        function () {\r\n                            this.NewFilled(false);\r\n                        }.bind(this),\r\n                        comeInfo.animalClearTime * 1000 + 300\r\n                    );\r\n                }.bind(this),\r\n                800\r\n            );\r\n        } else if (clearType_first == 4 && clearType_second == 4) {\r\n            cc.ZL.UIMgr.MinusStep();\r\n            cc.ZL.musicMgr.MyplayMusic(27, false);\r\n            let fn1 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n            let fn2 = cc.fadeOut(1);\r\n            this._firstNode.node.runAction(cc.sequence(fn1, fn2));\r\n            let fn3 = cc.scaleTo(1, 3, 3).easing(cc.easeElasticOut(0.9));\r\n            let fn4 = cc.fadeOut(1);\r\n            this._sectedNode.node.runAction(cc.sequence(fn3, fn4));\r\n            setTimeout(\r\n                function () {\r\n                    for (let i = 0; i < comeInfo.row; i++) {\r\n                        for (let j = 0; j < comeInfo.column; j++) {\r\n                            //排除空格子和不启用\r\n                            if (this.animalArray[i][j] != 0 && this.animalArray[i][j] != -1) {\r\n                                console.log('555555555');\r\n                                this.animalArray[i][j].clear();\r\n                            }\r\n                        }\r\n                    }\r\n                    //消除完成后填充\r\n                    setTimeout(\r\n                        function () {\r\n                            this.NewFilled(false);\r\n                        }.bind(this),\r\n                        comeInfo.animalClearTime * 1000 + 100\r\n                    );\r\n                }.bind(this),\r\n                800\r\n            );\r\n        }\r\n    },\r\n    Math(node1, node2) {\r\n        let list_one = this.MatchOne(node1);\r\n        let list_two = this.MatchOne(node2);\r\n        if (list_one.length == 0 && list_two.length == 0) {\r\n            //console.log(\"匹配不成功\");\r\n            this.changePos(false);\r\n            this.mask.active = false;\r\n            this._firstNode = null;\r\n            this._sectedNode = null;\r\n            this.selectLogo.active = false;\r\n        } else {\r\n            //console.log(\"匹配成功\");\r\n            cc.ZL.UIMgr.MinusStep();\r\n            if (list_one.length != 0) {\r\n                //第一个匹配成功\r\n                this.RemoveAnimList(list_one);\r\n            }\r\n            if (list_two.length != 0) {\r\n                //第二个也匹配成功\r\n                this.RemoveAnimList(list_two);\r\n            }\r\n            this.clearOverFiled();\r\n        }\r\n    },\r\n    //匹配一个\r\n    MatchOne(node) {\r\n        //横向队列\r\n        let Rlist = new Array();\r\n        //纵向队列\r\n        let Clist = new Array();\r\n        //符合要求队列\r\n        let MList = new Array();\r\n        let rownum = node.rowNum;\r\n        let columnnum = node.columnNum;\r\n        let animType = node.animType;\r\n        //不是动物不匹配\r\n        if (animType >= 6 || animType == 0) {\r\n            return MList;\r\n        }\r\n        //查看横方向是否可以匹配消除\r\n        for (let i = 0; i <= 1; i++) {\r\n            //0向左1向右\r\n            for (let j = 1; j < 8; j++) {\r\n                let next_x;\r\n                if (i == 0) {\r\n                    next_x = columnnum + j;\r\n                } else {\r\n                    next_x = columnnum - j;\r\n                }\r\n\r\n                //防止超界\r\n                if (next_x < 0 || next_x > 8) {\r\n                    break;\r\n                }\r\n                //防止不启用或者空格子-1，0\r\n                if (\r\n                    this.animalArray[rownum][next_x] == comeInfo.animalType.noOpen ||\r\n                    this.animalArray[rownum][next_x] == comeInfo.animalType.none\r\n                ) {\r\n                    break;\r\n                }\r\n                if (this.animalArray[rownum][next_x].animType == animType) {\r\n                    Rlist.push(this.animalArray[rownum][next_x]);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        //查看纵方向是否可以匹配消除\r\n        for (let i = 0; i <= 1; i++) {\r\n            //0上1下\r\n            for (let j = 1; j < 8; j++) {\r\n                let next_y;\r\n                if (i == 0) {\r\n                    next_y = rownum - j;\r\n                } else {\r\n                    next_y = rownum + j;\r\n                }\r\n                //防止超界\r\n                if (next_y < 0 || next_y > 8) {\r\n                    break;\r\n                }\r\n                //防止不启用或者空格子-1，0\r\n                if (\r\n                    this.animalArray[next_y][columnnum] == comeInfo.animalType.noOpen ||\r\n                    this.animalArray[next_y][columnnum] == comeInfo.animalType.none\r\n                ) {\r\n                    break;\r\n                }\r\n                if (this.animalArray[next_y][columnnum].animType == animType) {\r\n                    Clist.push(this.animalArray[next_y][columnnum]);\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        //匹配类型    //0：无类型  1：横4个 2：纵4个 3：T类型  4：5个\r\n        let matchtype = 0;\r\n        //匹配到5个\r\n        if (Rlist.length >= 4 || Clist.length >= 4) {\r\n            matchtype = 4;\r\n        } //T类型匹配\r\n        else if ((Rlist.length == 2 || Rlist.length == 3) && (Clist.length == 2 || Clist.length == 3)) {\r\n            matchtype = 3;\r\n        } //纵4个\r\n        else if (Clist.length == 3 && Rlist.length < 2) {\r\n            matchtype = 2;\r\n        } //横4个\r\n        else if (Clist.length < 2 && Rlist.length == 3) {\r\n            matchtype = 1;\r\n        } //纵或者横3个\r\n        else if ((Clist.length == 2 && Rlist.length < 2) || (Clist.length < 2 && Rlist.length == 2)) {\r\n            matchtype = 0;\r\n        }\r\n        if (Rlist.length >= 2) {\r\n            //如果有2个就符合要求\r\n            for (let i = 0; i < Rlist.length; i++) {\r\n                MList.push(Rlist[i]);\r\n            }\r\n        }\r\n        if (Clist.length >= 2) {\r\n            for (let i = 0; i < Clist.length; i++) {\r\n                MList.push(Clist[i]);\r\n            }\r\n        }\r\n        if (MList.length > 0) {\r\n            //有符合要求的\r\n            MList.push(node); //加入自身\r\n            MList.push(matchtype); //加入匹配类型\r\n        }\r\n        return MList;\r\n    },\r\n    //匹配成功就进行对应的消除\r\n    RemoveAnimList(list) {\r\n        this.is_Finised = false;\r\n        //获取到匹配类型\r\n        let cType = list[list.length - 1];\r\n        if (cType == 0) {\r\n            for (let i = 0; i < list.length - 1; i++) {\r\n                console.log('6666666666666');\r\n                console.log(i, 'i');\r\n                console.log(list, 'list');\r\n                console.log(list[i], 'list[i]');\r\n\r\n                list[i].clear();\r\n                //cc.ZL.UIMgr.AddScore(cc.ZL.UIMgr.add_score);\r\n            }\r\n        } else {\r\n            this.specialRemove(list, cType);\r\n        }\r\n    },\r\n    //产生特殊效果的消除\r\n    specialRemove(list, type) {\r\n        //查看匹配的节点是不是普通的节点\r\n        if (list[list.length - 2].clearType == 0) {\r\n            //如果是普通节点就把自身设置成特殊消除节点\r\n            list[list.length - 2].deleteMuBiao();\r\n            console.log('7777777777777', list);\r\n            //获取这个节点的位置用来产生特效标识\r\n            if (list[list.length - 2] != 0) {\r\n                if (type == 1) {\r\n                    //1：横4个\r\n                    list[list.length - 2].creatColnumEff(true);\r\n                } else if (type == 2) {\r\n                    //2：纵4个\r\n                    list[list.length - 2].creatRowEff(true);\r\n                } else if (type == 3) {\r\n                    //3：T类型\r\n                    list[list.length - 2].CreatTEff();\r\n                } else if (type == 4) {\r\n                    //4：5个\r\n                    list[list.length - 2].CreatFiveEff();\r\n                }\r\n            }\r\n            //其余的节点消除\r\n            for (let i = 0; i < list.length - 2; i++) {\r\n                list[i].clear();\r\n            }\r\n        } else {\r\n            //否者就随机选择一个普通节点，要是没有就全部消除\r\n            let r_column = null;\r\n            let r_row = null;\r\n            //寻找无特效节点\r\n            for (let i = 0; i < list.length - 2; i++) {\r\n                if (list[i].clearType == 0) {\r\n                    r_column = list[i].columnNum;\r\n                    r_row = list[i].rowNum;\r\n                    break;\r\n                }\r\n            }\r\n            if (r_column != null && r_row != null) {\r\n                //找到了\r\n                if (this.animalArray[r_row][r_column] != 0) {\r\n                    if (type == 1) {\r\n                        //1：横4个\r\n                        this.animalArray[r_row][r_column].creatColnumEff(true);\r\n                    } else if (type == 2) {\r\n                        //2：纵4个\r\n                        this.animalArray[r_row][r_column].creatRowEff(true);\r\n                    } else if (type == 3) {\r\n                        //3：T类型\r\n                        this.animalArray[r_row][r_column].CreatTEff();\r\n                    } else if (type == 4) {\r\n                        //4：5个\r\n                        this.animalArray[r_row][r_column].CreatFiveEff();\r\n                    }\r\n                }\r\n\r\n                //其余的全部消除\r\n                for (let i = 0; i < list.length - 1; i++) {\r\n                    if (list[i].rowNum == r_row && list[i].columnNum == r_column) {\r\n                        continue;\r\n                    } else {\r\n                        console.log('8888888888888');\r\n                        list[i].clear();\r\n                    }\r\n                }\r\n            } else {\r\n                //如果都为特效节点，全部消除就好\r\n                for (let i = 0; i < list.length - 1; i++) {\r\n                    console.log('999999999999');\r\n                    list[i].clear();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //消除后填充\r\n    clearOverFiled() {\r\n        //消除完成后填充\r\n        cc.ZL.musicMgr.MyplayMusic(2, false);\r\n        this.clearnum += 1;\r\n        if (this.clearnum > 2) {\r\n            if (this.clearnum >= 6) {\r\n                this.clearnum = 6;\r\n            }\r\n            cc.ZL.musicMgr.MyplayMusic(this.clearnum + 1, false);\r\n        }\r\n\r\n        setTimeout(\r\n            function () {\r\n                this.NewFilled(false);\r\n            }.bind(this),\r\n            comeInfo.animalClearTime * 1000\r\n        );\r\n    },\r\n    //特效设置\r\n    SetEff() {\r\n        // let effarry=lvdata[\"Lv\"+comeInfo.now_lv].eff;\r\n        let effarry = lvdata.eff;\r\n        for (let row = 0; row < comeInfo.row; row++) {\r\n            for (let column = 0; column < comeInfo.column; column++) {\r\n                if (effarry[row][column] == 1) {\r\n                    //横\r\n                    this.animalArray[row][column].creatRowEff();\r\n                } else if (effarry[row][column] == 2) {\r\n                    //纵\r\n                    this.animalArray[row][column].creatColnumEff();\r\n                } else if (effarry[row][column] == 3) {\r\n                    //T\r\n                    this.animalArray[row][column].CreatTEff();\r\n                } else if (effarry[row][column] == 4) {\r\n                    //魔力鸟\r\n                    this.animalArray[row][column].CreatFiveEff();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //------------------横向消除动物---------------------\r\n    RowClear(rownum, columnNum) {\r\n        for (let i = 0; i < comeInfo.column; i++) {\r\n            //排除自身（这个节点自身）\r\n            if (i == columnNum) {\r\n                continue;\r\n            }\r\n            //排除不是空格子或者不启用\r\n            if (\r\n                this.animalArray[rownum][i] != comeInfo.animalType.noOpen &&\r\n                this.animalArray[rownum][i] != comeInfo.animalType.none\r\n            ) {\r\n                //也不是障碍物\r\n                if (this.animalArray[rownum][i].animType != 0) {\r\n                    console.log('100000000000000');\r\n                    this.animalArray[rownum][i].clear();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //纵向消除动物\r\n    ColumnClear(rownum, columnnum) {\r\n        for (let i = 0; i < 9; i++) {\r\n            //排除自身\r\n            if (i == rownum) {\r\n                continue;\r\n            }\r\n            //排除不是空格子或者不启用\r\n            if (\r\n                this.animalArray[i][columnnum] != comeInfo.animalType.noOpen &&\r\n                this.animalArray[i][columnnum] != comeInfo.animalType.none\r\n            ) {\r\n                //也不是障碍物\r\n                if (this.animalArray[i][columnnum].animType != 0) {\r\n                    console.log('111111111111+++');\r\n                    this.animalArray[i][columnnum].clear();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //范围消除动物\r\n    RangeClear(rownum, columnnum) {\r\n        //要消除的集合\r\n        let totalList = new Array();\r\n        //从上往下开始\r\n        if (rownum - 2 >= 0) {\r\n            totalList.push(this.animalArray[rownum - 2][columnnum]);\r\n        }\r\n        if (rownum - 1 >= 0) {\r\n            if (columnnum - 1 >= 0) {\r\n                totalList.push(this.animalArray[rownum - 1][columnnum - 1]);\r\n            }\r\n            totalList.push(this.animalArray[rownum - 1][columnnum]);\r\n            if (columnnum + 1 <= comeInfo.column - 1) {\r\n                totalList.push(this.animalArray[rownum - 1][columnnum + 1]);\r\n            }\r\n        }\r\n        if (columnnum - 2 >= 0) {\r\n            totalList.push(this.animalArray[rownum][columnnum - 2]);\r\n        }\r\n        if (columnnum - 1 >= 0) {\r\n            totalList.push(this.animalArray[rownum][columnnum - 1]);\r\n        }\r\n        if (columnnum + 1 <= comeInfo.column - 1) {\r\n            totalList.push(this.animalArray[rownum][columnnum + 1]);\r\n        }\r\n        if (columnnum + 2 <= comeInfo.column - 1) {\r\n            totalList.push(this.animalArray[rownum][columnnum + 2]);\r\n        }\r\n        if (rownum + 1 <= comeInfo.row - 1) {\r\n            if (columnnum + 1 <= comeInfo.column - 1) {\r\n                totalList.push(this.animalArray[rownum + 1][columnnum + 1]);\r\n            }\r\n            totalList.push(this.animalArray[rownum + 1][columnnum]);\r\n            if (columnnum - 1 >= 0) {\r\n                totalList.push(this.animalArray[rownum + 1][columnnum - 1]);\r\n            }\r\n        }\r\n        if (rownum + 2 <= comeInfo.row - 1) {\r\n            totalList.push(this.animalArray[rownum + 2][columnnum]);\r\n        }\r\n        for (let i = 0; i < totalList.length; i++) {\r\n            //不是空物体\r\n            if (totalList[i] != 0 && totalList[i] != -1) {\r\n                //也不是障碍物\r\n                if (totalList[i].animType != 0) {\r\n                    console.log('133333333333333');\r\n                    totalList[i].clear();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //同类消除\r\n    TypeClear(animaltype) {\r\n        for (let i = 0; i < comeInfo.row; i++) {\r\n            for (let j = 0; j < comeInfo.column; j++) {\r\n                //排除不启用和空格子\r\n                if (\r\n                    this.animalArray[i][j] != comeInfo.animalType.noOpen &&\r\n                    this.animalArray[i][j] != comeInfo.animalType.none\r\n                ) {\r\n                    if (this.animalArray[i][j].animType == animaltype) {\r\n                        console.log('144444444444444');\r\n                        this.animalArray[i][j].clear();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //道具交换位置\r\n    proChangePos(node) {\r\n        if (node.can_move == false) {\r\n            return;\r\n        }\r\n        if (this.prop_one == null) {\r\n            this.prop_one = node;\r\n            this.prop_one.node.scale = 1.2;\r\n            return;\r\n        }\r\n        //重复点击\r\n        if (this.prop_one == node) {\r\n            return;\r\n        }\r\n        if (this.prop_one != null && this.prop_two == null) {\r\n            this.mask.active = true;\r\n            this.prop_two = node;\r\n            let o_x = this.prop_one.columnNum;\r\n            let o_y = this.prop_one.rowNum;\r\n            let t_x = this.prop_two.columnNum;\r\n            let t_y = this.prop_two.rowNum;\r\n            this.prop_one.AnimMove(t_x, t_y);\r\n            this.prop_two.AnimMove(o_x, o_y);\r\n            this.prop_one.scale = 1;\r\n            this.prop_one = null;\r\n            this.prop_two = null;\r\n            if (!this.AllMatch()) {\r\n                this.mask.active = false;\r\n            }\r\n            cc.ZL.PropMgr.propFinished(3);\r\n        }\r\n    },\r\n    //全部动物随机调换位置\r\n    replaceAll() {\r\n        this.NoAnimNode.active = false;\r\n        let posArr = []; //将动物的位置放入数组\r\n        let AnimArr2 = [];\r\n        for (let i = this.info.Anim.length - 1; i >= 0; i--) {\r\n            for (let j = 0; j < this.info.Anim[i].length; j++) {\r\n                let anim = this.animalArray[i][j]; //得到这个动物\r\n                if (anim == 0 || anim == -1) {\r\n                    //空格子或者未启用的格子\r\n                    continue;\r\n                }\r\n                if (anim.can_move == false) {\r\n                    continue;\r\n                }\r\n\r\n                let pos = [i, j];\r\n                AnimArr2.push(anim);\r\n                posArr.push(pos);\r\n            }\r\n        }\r\n        //打乱数组顺序\r\n        for (let i = 0; i < posArr.length; i++) {\r\n            let lastIndex = posArr.length - 1 - i; //取出最后一个\r\n            let index = Math.floor(Math.random() * lastIndex);\r\n            let temp = [posArr[index][0], posArr[index][1]];\r\n            posArr[index][0] = posArr[lastIndex][0];\r\n            posArr[index][1] = posArr[lastIndex][1];\r\n            posArr[lastIndex][0] = temp[0];\r\n            posArr[lastIndex][1] = temp[1];\r\n        }\r\n        for (let i = 0; i < AnimArr2.length; i++) {\r\n            AnimArr2[i].AnimMove(posArr[i][1], posArr[i][0]);\r\n        }\r\n        setTimeout(\r\n            function () {\r\n                let is_Matc = this.AllMatch(); //随机调换位置后重新匹配一下\r\n                // console.log('有能消除的东西22222',is_Matc)\r\n                if (is_Matc) {\r\n                    //如果有匹配上的\r\n                    this.clearOverFiled();\r\n                }\r\n                this.IsNoMatch();\r\n            }.bind(this),\r\n            comeInfo.animalMoveTime * 1000 + 300\r\n        );\r\n    },\r\n    //----------判断是不是死图-----------------------------------\r\n    IsNoMatch() {\r\n        // console.log('info===>', this.info.Anim)\r\n        // console.log('animalArray===>', this.animalArray)\r\n        for (let i = 0; i < this.info.Anim.length; i++) {\r\n            for (let j = 1; j < this.info.Anim[i].length - 1; j++) {\r\n                let anim = this.animalArray[i][j]; //得到这个动物\r\n                if (anim == 0 || anim == -1) {\r\n                    //空格子或者未启用的格子\r\n                    continue;\r\n                }\r\n                if (anim.can_move == false) {\r\n                    continue;\r\n                }\r\n                //查看有没有可以消除的特殊效果\r\n                if (anim.clearType == 4 || anim.animType == 6) {\r\n                    //如果是魔力鸟\r\n                    this.mask.active = false;\r\n                    return true;\r\n                }\r\n                if (anim.clearType != 0) {\r\n                    if (i - 1 >= 0) {\r\n                        if (this.animalArray[i - 1][j] != 0 && this.animalArray[i - 1][j] != -1) {\r\n                            if (this.animalArray[i - 1][j].clearType != 0) {\r\n                                this.mask.active = false;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (i + 1 < 9) {\r\n                        if (this.animalArray[i + 1][j] != 0 && this.animalArray[i + 1][j] != -1) {\r\n                            if (this.animalArray[i + 1][j].clearType != 0) {\r\n                                this.mask.active = false;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (j - 1 >= 0) {\r\n                        if (this.animalArray[i][j - 1] != 0 && this.animalArray[i][j - 1] != -1) {\r\n                            if (this.animalArray[i][j - 1].clearType != 0) {\r\n                                this.mask.active = false;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (j + 1 < 9) {\r\n                        if (this.animalArray[i][j + 1] != 0 && this.animalArray[i][j + 1] != -1) {\r\n                            if (this.animalArray[i][j + 1].clearType != 0) {\r\n                                this.mask.active = false;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isDie(anim)) {\r\n                    // console.log(\"有可以消除的\",this.animalArray)\r\n                    this.mask.active = false;\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        console.log('没有可以消除的');\r\n        this.NoAnimNode.active = true;\r\n        return false;\r\n    },\r\n    isDie(anim) {\r\n        let x = anim.rowNum;\r\n        let y = anim.columnNum;\r\n        let animType = anim.animType;\r\n        // console.log('isDie', x,y,animType)\r\n        //任何一种匹配成功都可以\r\n        let type1 = this.IsFirstLineCast(x, y, animType);\r\n        let type2 = this.IsSecondLineCast(x, y, animType);\r\n        let type3 = this.IsThirdLineCast(x, y, animType);\r\n        let type4 = this.IsSameRowCol(x, y, animType);\r\n        if (type1 || type2 || type3 || type4) {\r\n            console.log(\r\n                '有可以消除的___',\r\n                'type1:' + type1,\r\n                '  type2:' + type2,\r\n                '  type3:' + type3,\r\n                '  type4:' + type4\r\n            );\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    /*\r\n     * O O\r\n     *  X\r\n     * O O\r\n     */\r\n    IsFirstLineCast(x, y, animType) {\r\n        var lx = x - 1;\r\n        var ly = y - 1;\r\n        var tx = x + 1;\r\n        var ty = y + 1;\r\n        var isLeftBottomSame = false;\r\n        var isLeftTopSame = false;\r\n        var isRightBottomSame = false;\r\n        var isRightTopSame = false;\r\n        if (lx >= 0 && ly >= 0) {\r\n            if (this.animalArray[lx][ly] != 0 && this.animalArray[lx][ly] != -1) {\r\n                if (this.animalArray[lx][ly].animType == animType) {\r\n                    isLeftBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (lx >= 0 && ty < 9) {\r\n            if (this.animalArray[lx][ty] != 0 && this.animalArray[lx][ty] != -1) {\r\n                if (this.animalArray[lx][ty].animType == animType) {\r\n                    isLeftTopSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ly >= 0) {\r\n            if (this.animalArray[tx][ly] != 0 && this.animalArray[tx][ly] != -1) {\r\n                if (this.animalArray[tx][ly].animType == animType) {\r\n                    isRightBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ty < 9) {\r\n            if (this.animalArray[tx][ty] != 0 && this.animalArray[tx][ty] != -1) {\r\n                if (this.animalArray[tx][ty].animType == animType) {\r\n                    isRightTopSame = true;\r\n                }\r\n            }\r\n        }\r\n        // 左下角与右下角\r\n        if (isLeftBottomSame && isRightBottomSame) {\r\n            //这个动物必须可以下移才可以\r\n            if (\r\n                this.animalArray[x][y - 1] != 0 &&\r\n                this.animalArray[x][y - 1] != -1 &&\r\n                this.animalArray[x][y - 1].can_move\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // 左下角与左上角\r\n        if (isLeftBottomSame && isLeftTopSame) {\r\n            //这个动物必须可以左移才可以\r\n            if (\r\n                this.animalArray[x - 1][y] != 0 &&\r\n                this.animalArray[x - 1][y] != -1 &&\r\n                this.animalArray[x - 1][y].can_move\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // 左上角与右上角\r\n        if (isLeftTopSame && isRightTopSame) {\r\n            //这个动物必须可以上移才可以\r\n            if (\r\n                this.animalArray[x][y + 1] != 0 &&\r\n                this.animalArray[x][y + 1] != -1 &&\r\n                this.animalArray[x][y + 1].can_move\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // 右上角与右下角\r\n        if (isRightTopSame && isRightBottomSame) {\r\n            //这个动物必须可以上移才可以\r\n            if (\r\n                this.animalArray[x + 1][y] != 0 &&\r\n                this.animalArray[x + 1][y] != -1 &&\r\n                this.animalArray[x + 1][y].can_move\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n     * O  O\r\n     *  XX\r\n     * O  O\r\n     */\r\n    IsSecondLineCast(x, y, animType) {\r\n        var lx = x - 1;\r\n        var ly = y - 2;\r\n        var tx = x + 1;\r\n        var ty = y + 1;\r\n        var isLeftBottomSame = false;\r\n        var isLeftTopSame = false;\r\n        var isRightBottomSame = false;\r\n        var isRightTopSame = false;\r\n        if (lx >= 0 && ly >= 0) {\r\n            if (this.animalArray[lx][ly] != 0 && this.animalArray[lx][ly] != -1) {\r\n                if (this.animalArray[lx][ly].animType == animType && this.animalArray[lx][ly].can_move) {\r\n                    isLeftBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (lx >= 0 && ty < 9) {\r\n            if (this.animalArray[lx][ty] != 0 && this.animalArray[lx][ty] != -1) {\r\n                if (this.animalArray[lx][ty].animType == animType && this.animalArray[lx][ty].can_move) {\r\n                    isLeftTopSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ly >= 0) {\r\n            if (this.animalArray[tx][ly] != 0 && this.animalArray[tx][ly] != -1) {\r\n                if (this.animalArray[tx][ly].animType == animType && this.animalArray[tx][ly].can_move) {\r\n                    isRightBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ty < 9) {\r\n            if (this.animalArray[tx][ty] != 0 && this.animalArray[tx][ty] != -1) {\r\n                if (this.animalArray[tx][ty].animType == animType && this.animalArray[tx][ty].can_move) {\r\n                    isRightTopSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (y - 1 >= 0 && this.animalArray[x][y - 1] != 0 && this.animalArray[x][y - 1] != -1) {\r\n            if (this.animalArray[x][y - 1].animType == animType) {\r\n                // 左下角\r\n                if (isLeftBottomSame) {\r\n                    //这个动物必须可以右移才可以\r\n                    if (\r\n                        this.animalArray[x][y - 2] != 0 &&\r\n                        this.animalArray[x][y - 2] != -1 &&\r\n                        this.animalArray[x][y - 2].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 左上角\r\n                if (isLeftTopSame) {\r\n                    //这个动物必须可以右移才可以\r\n                    if (\r\n                        this.animalArray[x][y + 1] != 0 &&\r\n                        this.animalArray[x][y + 1] != -1 &&\r\n                        this.animalArray[x][y + 1].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 右下角\r\n                if (isRightBottomSame) {\r\n                    //这个动物必须可以左移才可以\r\n                    if (\r\n                        this.animalArray[x][y - 2] != 0 &&\r\n                        this.animalArray[x][y - 2] != -1 &&\r\n                        this.animalArray[x][y - 2].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 右上角\r\n                if (isRightTopSame) {\r\n                    //这个动物必须可以右移才可以\r\n                    if (\r\n                        this.animalArray[x][y + 1] != 0 &&\r\n                        this.animalArray[x][y + 1] != -1 &&\r\n                        this.animalArray[x][y + 1].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    /*\r\n     * O O\r\n     *  X\r\n     *  X\r\n     * O O\r\n     */\r\n    IsThirdLineCast(x, y, animType) {\r\n        var lx = x - 1;\r\n        var ly = y - 1;\r\n        var tx = x + 2;\r\n        var ty = y + 1;\r\n        var isLeftBottomSame = false;\r\n        var isLeftTopSame = false;\r\n        var isRightBottomSame = false;\r\n        var isRightTopSame = false;\r\n        if (lx >= 0 && ly >= 0) {\r\n            if (this.animalArray[lx][ly] != 0 && this.animalArray[lx][ly] != -1) {\r\n                if (this.animalArray[lx][ly].animType == animType && this.animalArray[lx][ly].can_move) {\r\n                    isLeftBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (lx >= 0 && ty < 9) {\r\n            if (this.animalArray[lx][ty] != 0 && this.animalArray[lx][ty] != -1) {\r\n                if (this.animalArray[lx][ty].animType == animType && this.animalArray[lx][ty].can_move) {\r\n                    isLeftTopSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ly >= 0) {\r\n            if (this.animalArray[tx][ly] != 0 && this.animalArray[tx][ly] != -1) {\r\n                if (this.animalArray[tx][ly].animType == animType && this.animalArray[tx][ly].can_move) {\r\n                    isRightBottomSame = true;\r\n                }\r\n            }\r\n        }\r\n        if (tx < 9 && ty < 9) {\r\n            if (this.animalArray[tx][ty] != 0 && this.animalArray[tx][ty] != -1) {\r\n                if (this.animalArray[tx][ty].animType == animType && this.animalArray[tx][ty].can_move) {\r\n                    isRightTopSame = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (x + 1 < 9 && this.animalArray[x + 1][y] != 0 && this.animalArray[x + 1][y] != -1) {\r\n            if (this.animalArray[x + 1][y].animType == animType) {\r\n                // 左下角\r\n                if (isLeftBottomSame) {\r\n                    //这个动物必须可以上移才可以\r\n                    if (\r\n                        this.animalArray[x - 1][y] != 0 &&\r\n                        this.animalArray[x - 1][y] != -1 &&\r\n                        this.animalArray[x - 1][y].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 左上角\r\n                if (isLeftTopSame) {\r\n                    //这个动物必须可以下移才可以\r\n                    if (\r\n                        this.animalArray[x - 1][y] != 0 &&\r\n                        this.animalArray[x - 1][y] != -1 &&\r\n                        this.animalArray[x - 1][y].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 右下角\r\n                if (isRightBottomSame) {\r\n                    //这个动物必须可以上移才可以\r\n                    if (\r\n                        this.animalArray[x + 2][y] != 0 &&\r\n                        this.animalArray[x + 2][y] != -1 &&\r\n                        this.animalArray[x + 2][y].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n                // 右上角\r\n                if (isRightTopSame) {\r\n                    //这个动物必须可以下移才可以\r\n                    if (\r\n                        this.animalArray[x + 2][y] != 0 &&\r\n                        this.animalArray[x + 2][y] != -1 &&\r\n                        this.animalArray[x + 2][y].can_move\r\n                    ) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    // 同一行或者同一列，有可以消除的\r\n    IsSameRowCol(x, y, animType) {\r\n        // 0x00 和 00x0\r\n        if (x < 6) {\r\n            let add1 = this.animalArray[x + 1][y];\r\n            let add2 = this.animalArray[x + 2][y];\r\n            let add3 = this.animalArray[x + 3][y];\r\n            // console.log(x+\"---\"+y)\r\n            // console.log(animType)\r\n            if (\r\n                add1 &&\r\n                add1 != 0 &&\r\n                add1 != -1 &&\r\n                add3 &&\r\n                add3 != 0 &&\r\n                add3 != -1 &&\r\n                add2 &&\r\n                add2 != 0 &&\r\n                add2 != -1 &&\r\n                add2.can_move &&\r\n                add1.animType == animType &&\r\n                add3.animType == animType\r\n            ) {\r\n                console.log('func1__', this.animalArray, x, y, animType);\r\n                return true;\r\n            }\r\n\r\n            if (\r\n                add2 &&\r\n                add2 != 0 &&\r\n                add2 != -1 &&\r\n                add3 &&\r\n                add3 != 0 &&\r\n                add3 != -1 &&\r\n                add1 &&\r\n                add1 != 0 &&\r\n                add1 != -1 &&\r\n                add1.can_move &&\r\n                add2.animType == animType &&\r\n                add3.animType == animType\r\n            ) {\r\n                console.log('func2__', this.animalArray, x, y, animType);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (y < 6) {\r\n            // 纵向\r\n            let addc1 = this.animalArray[x][y + 1];\r\n            let addc2 = this.animalArray[x][y + 2];\r\n            let addc3 = this.animalArray[x][y + 3];\r\n\r\n            // console.log(addc1)\r\n            // console.log(addc2)\r\n            // console.log(addc3)\r\n            if (\r\n                addc1 &&\r\n                addc1 != 0 &&\r\n                addc1 != -1 &&\r\n                addc3 &&\r\n                addc3 != 0 &&\r\n                addc3 != -1 &&\r\n                addc2 &&\r\n                addc2 != 0 &&\r\n                addc2 != -1 &&\r\n                addc2.can_move &&\r\n                addc1.animType == animType &&\r\n                addc3.animType == animType\r\n            ) {\r\n                console.log('func3__', this.animalArray, x, y, animType);\r\n                return true;\r\n            }\r\n\r\n            if (\r\n                addc1 &&\r\n                addc1 != 0 &&\r\n                addc1 != -1 &&\r\n                addc2 &&\r\n                addc2 != 0 &&\r\n                addc2 != -1 &&\r\n                addc3 &&\r\n                addc3 != 0 &&\r\n                addc3 != -1 &&\r\n                addc1.can_move &&\r\n                addc2.animType == animType &&\r\n                addc3.animType == animType\r\n            ) {\r\n                console.log('func4__', this.animalArray, x, y, animType);\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n});\r\n"]}