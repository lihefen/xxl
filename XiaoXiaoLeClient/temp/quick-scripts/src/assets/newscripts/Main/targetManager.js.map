{"version":3,"sources":["assets/newscripts/Main/targetManager.js"],"names":["require","UIHelp","cc","Class","Component","properties","targetList","Node","animList","scuessPrefab","Prefab","EndPrefab","ScuLogo","movePrefab","MoveStartPos","targetAnim","maskNode","layout","onLoad","ZL","targetMgr","ShowTarget","active","IsScuessed","start","BeginAnim","lvtarget","lvdata","target","i","length","getComponent","Sprite","spriteFrame","sprMgr","spr","icespr","getChildByName","Label","string","clearTarget","node","num","targetNum","pos","parent","convertToWorldSpaceAR","getPosition","pos1","convertToNodeSpaceAR","setPosition","runAction","moveTo","scaleTo","setTimeout","destroy","bind","console","log","IsScuess","sc","UIMgr","stepnum","onGetData","animMgr","mask","audioEngine","pauseAll","musicMgr","MyplayMusic","scueff","preas","rid","gamedata","token","network","httpConnect_post_async","getMyPropListCall","msg","utils","HideLoading","code","data","a","end","instantiate","addChild","InitView","addTips","message","logo","anim","sp","Skeleton","clearTracks","addAnimation","setCompleteListener","liveStep","step","n","animArry","Array","animalArray","j","animType","clearType","push","myRand","k","schedule","Math","random","MinusStep","move","Move","newarry","clear","NewFilled","game_code","coin","floor","_score","stars","GetStarNum","gral","status","endGameCallBack","level_stars","energy","Number","gold","scu","arr","newarr","splice","removeComponent","Layout","xy","convetOtherNodeSpaceAR","x","y","cubeMgr","BeginReminder"],"mappings":"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","sourceRoot":"/","sourcesContent":["const { UIHelp } = require('../UIHelp');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        targetList: [cc.Node],\r\n        animList: [cc.Node],\r\n        //胜利面板\r\n        scuessPrefab: cc.Prefab,\r\n        //失败面板\r\n        EndPrefab: cc.Prefab,\r\n        ScuLogo: cc.Prefab,\r\n        //移动的预制体\r\n        movePrefab: cc.Prefab,\r\n        //要设置的位置\r\n        MoveStartPos: cc.Node,\r\n\r\n        //开始目标动画\r\n        targetAnim: cc.Node,\r\n        maskNode: cc.Node,\r\n        layout: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        cc.ZL.targetMgr = this;\r\n        this.ShowTarget();\r\n        this.maskNode.active = true;\r\n        this.IsScuessed = false;\r\n    },\r\n\r\n    start() {\r\n        this.BeginAnim();\r\n    },\r\n\r\n    // update (dt) {},\r\n    //显示目标信息\r\n    ShowTarget() {\r\n        // let lvtarget=lvdata[\"Lv\"+comeInfo.now_lv].target;\r\n        let lvtarget = lvdata.target;\r\n        for (let i = 0; i < 4; i++) {\r\n            if (i < lvtarget.length) {\r\n                this.targetList[i].active = true;\r\n                if (lvtarget[i][0] < 10) {\r\n                    this.animList[i].getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[lvtarget[i][0]];\r\n                } else {\r\n                    this.animList[i].getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.icespr[lvtarget[i][0] - 10];\r\n                }\r\n\r\n                this.targetList[i].getChildByName('num').getComponent(cc.Label).string = lvtarget[i][1];\r\n            } else {\r\n                this.targetList[i].active = false;\r\n                this.animList[i].active = false;\r\n            }\r\n        }\r\n    },\r\n    clearTarget(node, num) {\r\n        //算出动物的坐标\r\n        this.targetNum(num);\r\n        var pos = node.parent.convertToWorldSpaceAR(node.getPosition());\r\n        var pos1 = this.targetList[num].convertToNodeSpaceAR(pos);\r\n        node.parent = this.targetList[num];\r\n        node.setPosition(pos1);\r\n        node.runAction(cc.moveTo(0.5, 0, 0));\r\n        node.runAction(cc.scaleTo(0.5, 0.2, 0.2));\r\n        setTimeout(\r\n            function () {\r\n                node.runAction(cc.scaleTo(0.2, 1.4, 1.4));\r\n                setTimeout(\r\n                    function () {\r\n                        node.destroy();\r\n                    }.bind(this),\r\n                    200\r\n                );\r\n            }.bind(this),\r\n            500\r\n        );\r\n    },\r\n    //有效目标数减1\r\n    targetNum(num) {\r\n        console.log('目标数------');\r\n        if (this.targetList[num].getChildByName('num').getComponent(cc.Label).string > 0) {\r\n            this.targetList[num].getChildByName('num').getComponent(cc.Label).string -= 1;\r\n            //this.num_arry[num] -=1;\r\n        } else {\r\n            //this.num_arry[num] =0;\r\n            this.targetList[num].getChildByName('num').getComponent(cc.Label).string = 0;\r\n        }\r\n    },\r\n    //判断是否成功\r\n    IsScuess() {\r\n        let sc = true;\r\n        for (let i = 0; i < this.targetList.length; i++) {\r\n            if (this.targetList[i].active) {\r\n                if (this.targetList[i].getChildByName('num').getComponent(cc.Label).string > 0) {\r\n                    sc = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (cc.ZL.UIMgr.stepnum <= 0 && sc == false) {\r\n            this.onGetData();\r\n            return true;\r\n        }\r\n        if (sc) {\r\n            cc.ZL.animMgr.mask.active = true;\r\n            cc.audioEngine.pauseAll();\r\n            cc.ZL.musicMgr.MyplayMusic(16, false);\r\n            this.scueff();\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    onGetData() {\r\n        let preas = {\r\n            rid: gamedata.rid,\r\n            token: gamedata.token,\r\n        };\r\n        UIHelp.network.httpConnect_post_async('game/xiaoxiaole/getPropList', preas, this.getMyPropListCall.bind(this));\r\n    },\r\n\r\n    getMyPropListCall(msg) {\r\n        console.log('getMyPropList===>', msg);\r\n        utils.HideLoading();\r\n        if (msg.code == 200) {\r\n            var num = 0;\r\n            if (msg.data.length > 0) {\r\n                for (let a = 0; a < msg.data.length; a++) {\r\n                    if (msg.data[a]['gid'] == 10004) {\r\n                        num = msg.data[a]['coin'];\r\n                    }\r\n                }\r\n            }\r\n            cc.ZL.animMgr.mask.active = true;\r\n            let end = cc.instantiate(this.EndPrefab);\r\n            this.node.parent.addChild(end);\r\n            end.setPosition(0, 0);\r\n            end.getComponent('End').InitView(num);\r\n        } else {\r\n            utils.addTips(msg.message);\r\n        }\r\n    },\r\n    //胜利特效\r\n    scueff() {\r\n        this.IsScuessed = true;\r\n        let logo = cc.instantiate(this.ScuLogo);\r\n        this.node.addChild(logo);\r\n        let anim = logo.getChildByName('ingame_Clear').getComponent(sp.Skeleton);\r\n        anim.clearTracks();\r\n        anim.addAnimation(0, 'normal', false, 0);\r\n        anim.setCompleteListener(\r\n            function () {\r\n                logo.destroy();\r\n                if (logo) {\r\n                    this.liveStep();\r\n                }\r\n            }.bind(this)\r\n        );\r\n    },\r\n    //还剩多少步\r\n    liveStep() {\r\n        let step = cc.ZL.UIMgr.stepnum;\r\n        let n = 0;\r\n        //先获取动物数组中所有动物\r\n        let animArry = new Array();\r\n        for (let i = 0; i < cc.ZL.animMgr.animalArray.length; i++) {\r\n            for (let j = 0; j < cc.ZL.animMgr.animalArray[i].length; j++) {\r\n                if (cc.ZL.animMgr.animalArray[i][j] != 0 && cc.ZL.animMgr.animalArray[i][j] != -1) {\r\n                    if (cc.ZL.animMgr.animalArray[i][j].animType != 0 && cc.ZL.animMgr.animalArray[i][j].animType < 6) {\r\n                        if (cc.ZL.animMgr.animalArray[i][j].clearType == 0) {\r\n                            animArry.push(cc.ZL.animMgr.animalArray[i][j]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //再从动物中随机抽取N个不同的动物\r\n        if (step > animArry.length) {\r\n            step = animArry.length;\r\n        }\r\n        animArry = this.myRand(animArry, step);\r\n        let k = 0;\r\n        this.schedule(\r\n            function () {\r\n                let num = Math.random() * 2;\r\n                if (num < 1) {\r\n                    animArry[k].clearType = 1;\r\n                } else {\r\n                    animArry[k].clearType = 2;\r\n                }\r\n                cc.ZL.musicMgr.MyplayMusic(20, false);\r\n                cc.ZL.UIMgr.MinusStep();\r\n                let move = cc.instantiate(this.movePrefab);\r\n                this.node.addChild(move);\r\n                move.setPosition(this.MoveStartPos.getPosition());\r\n                move.getComponent('EndMove').Move(animArry[k], num);\r\n                k += 1;\r\n            }.bind(this),\r\n            0.3,\r\n            step - 1\r\n        );\r\n        setTimeout(\r\n            function () {\r\n                let newarry = new Array();\r\n                //把带特效的全部消除\r\n                // console.log('cocos===>', cc.ZL.animMgr.animalArray)\r\n                for (let i = 0; i < cc.ZL.animMgr.animalArray.length; i++) {\r\n                    for (let j = 0; j < cc.ZL.animMgr.animalArray[i].length; j++) {\r\n                        if (cc.ZL.animMgr.animalArray[i][j] != 0 && cc.ZL.animMgr.animalArray[i][j] != -1) {\r\n                            if (\r\n                                cc.ZL.animMgr.animalArray[i][j].animType != 0 &&\r\n                                cc.ZL.animMgr.animalArray[i][j].animType < 6\r\n                            ) {\r\n                                if (cc.ZL.animMgr.animalArray[i][j].clearType != 0) {\r\n                                    newarry.push(cc.ZL.animMgr.animalArray[i][j]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                // console.log('cocos===>', cc.ZL.animMgr.animalArray)\r\n                // return;\r\n                //启动消除程序\r\n                let n = 0;\r\n                this.schedule(\r\n                    function () {\r\n                        // console.log('有特效的==>', newarry, n)\r\n                        if (newarry[n]) {\r\n                            newarry[n].clear();\r\n                        }\r\n                        n += 1;\r\n                        // }.bind(this), 0.1, step - 1)\r\n                    }.bind(this),\r\n                    0.1,\r\n                    newarry.length - 1\r\n                );\r\n                //下一步填充\r\n                // return;\r\n                setTimeout(\r\n                    function () {\r\n                        cc.ZL.animMgr.NewFilled(true);\r\n                        // setTimeout(function(){\r\n\r\n                        let preas = {\r\n                            rid: gamedata.rid,\r\n                            token: gamedata.token,\r\n                            game_code: gamedata.game_code,\r\n                            coin: Math.floor(cc.ZL.UIMgr._score / 1000),\r\n                            stars: cc.ZL.UIMgr.GetStarNum(),\r\n                            gral: cc.ZL.UIMgr._score,\r\n                            status: 1,\r\n                        };\r\n                        UIHelp.network.httpConnect_post_async(\r\n                            'game/xiaoxiaole/endGame',\r\n                            preas,\r\n                            this.endGameCallBack.bind(this)\r\n                        );\r\n                        // let scu=cc.instantiate(this.scuessPrefab);\r\n                        // this.node.parent.addChild(scu);\r\n                        // scu.setPosition(0,0);\r\n                        // scu.getComponent(\"Scuess\").InitView();\r\n                        // }.bind(this),1000);\r\n                    }.bind(this),\r\n                    200 * newarry.length + 200\r\n                );\r\n            }.bind(this),\r\n            400 * step\r\n        );\r\n    },\r\n\r\n    endGameCallBack(msg) {\r\n        console.log('endGame===>', msg);\r\n        if (msg.code == 200) {\r\n            if (msg.data.level_stars) {\r\n                gamedata.level_stars = msg.data.level_stars;\r\n            }\r\n            gamedata.energy = Number(msg.data.energy);\r\n            gamedata.gold = Number(msg.data.coin);\r\n            let scu = cc.instantiate(this.scuessPrefab);\r\n            this.node.parent.addChild(scu);\r\n            scu.setPosition(0, 0);\r\n            scu.getComponent('Scuess').InitView();\r\n        } else {\r\n            utils.addTips(msg.message);\r\n        }\r\n    },\r\n    //数组中随机抽取N条不重复的数据\r\n    myRand(arr, num) {\r\n        let newarr = [];\r\n        for (let i = 0; i < num; i++) {\r\n            let n = Math.floor(Math.random() * arr.length);\r\n            newarr.push(arr[n]);\r\n            arr.splice(n, 1);\r\n        }\r\n        return newarr;\r\n    },\r\n\r\n    //开始动画\r\n    BeginAnim() {\r\n        let anim = this.targetAnim.getComponent(sp.Skeleton);\r\n        anim.clearTracks();\r\n        anim.addAnimation(0, 'play', false, 0);\r\n        anim.setCompleteListener(\r\n            function () {\r\n                setTimeout(\r\n                    function () {\r\n                        if (this.targetAnim) {\r\n                            this.layout.removeComponent(cc.Layout);\r\n                            for (let i = 0; i < this.targetList.length; i++) {\r\n                                let xy = utils.convetOtherNodeSpaceAR(this.targetList[i], this.animList[i].parent);\r\n                                this.animList[i].runAction(cc.moveTo(1, xy.x, xy.y));\r\n                            }\r\n                            setTimeout(\r\n                                function () {\r\n                                    if (this.targetAnim) {\r\n                                        this.targetAnim.active = false;\r\n                                        cc.ZL.animMgr.mask.active = false;\r\n                                        this.maskNode.active = false;\r\n                                        cc.ZL.cubeMgr.BeginReminder();\r\n                                    }\r\n                                }.bind(this),\r\n                                1000\r\n                            );\r\n                        }\r\n                    }.bind(this),\r\n                    2000\r\n                );\r\n            }.bind(this)\r\n        );\r\n    },\r\n});\r\n"]}