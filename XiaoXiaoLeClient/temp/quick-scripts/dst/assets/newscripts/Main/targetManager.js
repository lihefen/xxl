
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/newscripts/Main/targetManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9dd15/QJzZBpJ3cNm1+sRu5', 'targetManager');
// newscripts/Main/targetManager.js

"use strict";

var _require = require('../UIHelp'),
    UIHelp = _require.UIHelp;

cc.Class({
  "extends": cc.Component,
  properties: {
    targetList: [cc.Node],
    animList: [cc.Node],
    //胜利面板
    scuessPrefab: cc.Prefab,
    //失败面板
    EndPrefab: cc.Prefab,
    ScuLogo: cc.Prefab,
    //移动的预制体
    movePrefab: cc.Prefab,
    //要设置的位置
    MoveStartPos: cc.Node,
    //开始目标动画
    targetAnim: cc.Node,
    maskNode: cc.Node,
    layout: cc.Node
  },
  onLoad: function onLoad() {
    cc.ZL.targetMgr = this;
    this.ShowTarget();
    this.maskNode.active = true;
    this.IsScuessed = false;
  },
  start: function start() {
    this.BeginAnim();
  },
  // update (dt) {},
  //显示目标信息
  ShowTarget: function ShowTarget() {
    // let lvtarget=lvdata["Lv"+comeInfo.now_lv].target;
    var lvtarget = lvdata.target;

    for (var i = 0; i < 4; i++) {
      if (i < lvtarget.length) {
        this.targetList[i].active = true;

        if (lvtarget[i][0] < 10) {
          this.animList[i].getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[lvtarget[i][0]];
        } else {
          this.animList[i].getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.icespr[lvtarget[i][0] - 10];
        }

        this.targetList[i].getChildByName('num').getComponent(cc.Label).string = lvtarget[i][1];
      } else {
        this.targetList[i].active = false;
        this.animList[i].active = false;
      }
    }
  },
  clearTarget: function clearTarget(node, num) {
    //算出动物的坐标
    this.targetNum(num);
    var pos = node.parent.convertToWorldSpaceAR(node.getPosition());
    var pos1 = this.targetList[num].convertToNodeSpaceAR(pos);
    node.parent = this.targetList[num];
    node.setPosition(pos1);
    node.runAction(cc.moveTo(0.5, 0, 0));
    node.runAction(cc.scaleTo(0.5, 0.2, 0.2));
    setTimeout(function () {
      node.runAction(cc.scaleTo(0.2, 1.4, 1.4));
      setTimeout(function () {
        node.destroy();
      }.bind(this), 200);
    }.bind(this), 500);
  },
  //有效目标数减1
  targetNum: function targetNum(num) {
    console.log('目标数------');

    if (this.targetList[num].getChildByName('num').getComponent(cc.Label).string > 0) {
      this.targetList[num].getChildByName('num').getComponent(cc.Label).string -= 1; //this.num_arry[num] -=1;
    } else {
      //this.num_arry[num] =0;
      this.targetList[num].getChildByName('num').getComponent(cc.Label).string = 0;
    }
  },
  //判断是否成功
  IsScuess: function IsScuess() {
    var sc = true;

    for (var i = 0; i < this.targetList.length; i++) {
      if (this.targetList[i].active) {
        if (this.targetList[i].getChildByName('num').getComponent(cc.Label).string > 0) {
          sc = false;
          break;
        }
      }
    }

    if (cc.ZL.UIMgr.stepnum <= 0 && sc == false) {
      this.onGetData();
      return true;
    }

    if (sc) {
      cc.ZL.animMgr.mask.active = true;
      cc.audioEngine.pauseAll();
      cc.ZL.musicMgr.MyplayMusic(16, false);
      this.scueff();
      return true;
    } else {
      return false;
    }
  },
  onGetData: function onGetData() {
    var preas = {
      rid: gamedata.rid,
      token: gamedata.token
    };
    UIHelp.network.httpConnect_post_async('game/xiaoxiaole/getPropList', preas, this.getMyPropListCall.bind(this));
  },
  getMyPropListCall: function getMyPropListCall(msg) {
    console.log('getMyPropList===>', msg);
    utils.HideLoading();

    if (msg.code == 200) {
      var num = 0;

      if (msg.data.length > 0) {
        for (var a = 0; a < msg.data.length; a++) {
          if (msg.data[a]['gid'] == 10004) {
            num = msg.data[a]['coin'];
          }
        }
      }

      cc.ZL.animMgr.mask.active = true;
      var end = cc.instantiate(this.EndPrefab);
      this.node.parent.addChild(end);
      end.setPosition(0, 0);
      end.getComponent('End').InitView(num);
    } else {
      utils.addTips(msg.message);
    }
  },
  //胜利特效
  scueff: function scueff() {
    this.IsScuessed = true;
    var logo = cc.instantiate(this.ScuLogo);
    this.node.addChild(logo);
    var anim = logo.getChildByName('ingame_Clear').getComponent(sp.Skeleton);
    anim.clearTracks();
    anim.addAnimation(0, 'normal', false, 0);
    anim.setCompleteListener(function () {
      logo.destroy();

      if (logo) {
        this.liveStep();
      }
    }.bind(this));
  },
  //还剩多少步
  liveStep: function liveStep() {
    var step = cc.ZL.UIMgr.stepnum;
    var n = 0; //先获取动物数组中所有动物

    var animArry = new Array();

    for (var i = 0; i < cc.ZL.animMgr.animalArray.length; i++) {
      for (var j = 0; j < cc.ZL.animMgr.animalArray[i].length; j++) {
        if (cc.ZL.animMgr.animalArray[i][j] != 0 && cc.ZL.animMgr.animalArray[i][j] != -1) {
          if (cc.ZL.animMgr.animalArray[i][j].animType != 0 && cc.ZL.animMgr.animalArray[i][j].animType < 6) {
            if (cc.ZL.animMgr.animalArray[i][j].clearType == 0) {
              animArry.push(cc.ZL.animMgr.animalArray[i][j]);
            }
          }
        }
      }
    } //再从动物中随机抽取N个不同的动物


    if (step > animArry.length) {
      step = animArry.length;
    }

    animArry = this.myRand(animArry, step);
    var k = 0;
    this.schedule(function () {
      var num = Math.random() * 2;

      if (num < 1) {
        animArry[k].clearType = 1;
      } else {
        animArry[k].clearType = 2;
      }

      cc.ZL.musicMgr.MyplayMusic(20, false);
      cc.ZL.UIMgr.MinusStep();
      var move = cc.instantiate(this.movePrefab);
      this.node.addChild(move);
      move.setPosition(this.MoveStartPos.getPosition());
      move.getComponent('EndMove').Move(animArry[k], num);
      k += 1;
    }.bind(this), 0.3, step - 1);
    setTimeout(function () {
      var newarry = new Array(); //把带特效的全部消除
      // console.log('cocos===>', cc.ZL.animMgr.animalArray)

      for (var _i = 0; _i < cc.ZL.animMgr.animalArray.length; _i++) {
        for (var _j = 0; _j < cc.ZL.animMgr.animalArray[_i].length; _j++) {
          if (cc.ZL.animMgr.animalArray[_i][_j] != 0 && cc.ZL.animMgr.animalArray[_i][_j] != -1) {
            if (cc.ZL.animMgr.animalArray[_i][_j].animType != 0 && cc.ZL.animMgr.animalArray[_i][_j].animType < 6) {
              if (cc.ZL.animMgr.animalArray[_i][_j].clearType != 0) {
                newarry.push(cc.ZL.animMgr.animalArray[_i][_j]);
              }
            }
          }
        }
      } // console.log('cocos===>', cc.ZL.animMgr.animalArray)
      // return;
      //启动消除程序


      var n = 0;
      this.schedule(function () {
        // console.log('有特效的==>', newarry, n)
        if (newarry[n]) {
          newarry[n].clear();
        }

        n += 1; // }.bind(this), 0.1, step - 1)
      }.bind(this), 0.1, newarry.length - 1); //下一步填充
      // return;

      setTimeout(function () {
        cc.ZL.animMgr.NewFilled(true); // setTimeout(function(){

        var preas = {
          rid: gamedata.rid,
          token: gamedata.token,
          game_code: gamedata.game_code,
          coin: Math.floor(cc.ZL.UIMgr._score / 1000),
          stars: cc.ZL.UIMgr.GetStarNum(),
          gral: cc.ZL.UIMgr._score,
          status: 1
        };
        UIHelp.network.httpConnect_post_async('game/xiaoxiaole/endGame', preas, this.endGameCallBack.bind(this)); // let scu=cc.instantiate(this.scuessPrefab);
        // this.node.parent.addChild(scu);
        // scu.setPosition(0,0);
        // scu.getComponent("Scuess").InitView();
        // }.bind(this),1000);
      }.bind(this), 200 * newarry.length + 200);
    }.bind(this), 400 * step);
  },
  endGameCallBack: function endGameCallBack(msg) {
    console.log('endGame===>', msg);

    if (msg.code == 200) {
      if (msg.data.level_stars) {
        gamedata.level_stars = msg.data.level_stars;
      }

      gamedata.energy = Number(msg.data.energy);
      gamedata.gold = Number(msg.data.coin);
      var scu = cc.instantiate(this.scuessPrefab);
      this.node.parent.addChild(scu);
      scu.setPosition(0, 0);
      scu.getComponent('Scuess').InitView();
    } else {
      utils.addTips(msg.message);
    }
  },
  //数组中随机抽取N条不重复的数据
  myRand: function myRand(arr, num) {
    var newarr = [];

    for (var i = 0; i < num; i++) {
      var n = Math.floor(Math.random() * arr.length);
      newarr.push(arr[n]);
      arr.splice(n, 1);
    }

    return newarr;
  },
  //开始动画
  BeginAnim: function BeginAnim() {
    var anim = this.targetAnim.getComponent(sp.Skeleton);
    anim.clearTracks();
    anim.addAnimation(0, 'play', false, 0);
    anim.setCompleteListener(function () {
      setTimeout(function () {
        if (this.targetAnim) {
          this.layout.removeComponent(cc.Layout);

          for (var i = 0; i < this.targetList.length; i++) {
            var xy = utils.convetOtherNodeSpaceAR(this.targetList[i], this.animList[i].parent);
            this.animList[i].runAction(cc.moveTo(1, xy.x, xy.y));
          }

          setTimeout(function () {
            if (this.targetAnim) {
              this.targetAnim.active = false;
              cc.ZL.animMgr.mask.active = false;
              this.maskNode.active = false;
              cc.ZL.cubeMgr.BeginReminder();
            }
          }.bind(this), 1000);
        }
      }.bind(this), 2000);
    }.bind(this));
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9uZXdzY3JpcHRzL01haW4vdGFyZ2V0TWFuYWdlci5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiVUlIZWxwIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJ0YXJnZXRMaXN0IiwiTm9kZSIsImFuaW1MaXN0Iiwic2N1ZXNzUHJlZmFiIiwiUHJlZmFiIiwiRW5kUHJlZmFiIiwiU2N1TG9nbyIsIm1vdmVQcmVmYWIiLCJNb3ZlU3RhcnRQb3MiLCJ0YXJnZXRBbmltIiwibWFza05vZGUiLCJsYXlvdXQiLCJvbkxvYWQiLCJaTCIsInRhcmdldE1nciIsIlNob3dUYXJnZXQiLCJhY3RpdmUiLCJJc1NjdWVzc2VkIiwic3RhcnQiLCJCZWdpbkFuaW0iLCJsdnRhcmdldCIsImx2ZGF0YSIsInRhcmdldCIsImkiLCJsZW5ndGgiLCJnZXRDb21wb25lbnQiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsInNwck1nciIsInNwciIsImljZXNwciIsImdldENoaWxkQnlOYW1lIiwiTGFiZWwiLCJzdHJpbmciLCJjbGVhclRhcmdldCIsIm5vZGUiLCJudW0iLCJ0YXJnZXROdW0iLCJwb3MiLCJwYXJlbnQiLCJjb252ZXJ0VG9Xb3JsZFNwYWNlQVIiLCJnZXRQb3NpdGlvbiIsInBvczEiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsInNldFBvc2l0aW9uIiwicnVuQWN0aW9uIiwibW92ZVRvIiwic2NhbGVUbyIsInNldFRpbWVvdXQiLCJkZXN0cm95IiwiYmluZCIsImNvbnNvbGUiLCJsb2ciLCJJc1NjdWVzcyIsInNjIiwiVUlNZ3IiLCJzdGVwbnVtIiwib25HZXREYXRhIiwiYW5pbU1nciIsIm1hc2siLCJhdWRpb0VuZ2luZSIsInBhdXNlQWxsIiwibXVzaWNNZ3IiLCJNeXBsYXlNdXNpYyIsInNjdWVmZiIsInByZWFzIiwicmlkIiwiZ2FtZWRhdGEiLCJ0b2tlbiIsIm5ldHdvcmsiLCJodHRwQ29ubmVjdF9wb3N0X2FzeW5jIiwiZ2V0TXlQcm9wTGlzdENhbGwiLCJtc2ciLCJ1dGlscyIsIkhpZGVMb2FkaW5nIiwiY29kZSIsImRhdGEiLCJhIiwiZW5kIiwiaW5zdGFudGlhdGUiLCJhZGRDaGlsZCIsIkluaXRWaWV3IiwiYWRkVGlwcyIsIm1lc3NhZ2UiLCJsb2dvIiwiYW5pbSIsInNwIiwiU2tlbGV0b24iLCJjbGVhclRyYWNrcyIsImFkZEFuaW1hdGlvbiIsInNldENvbXBsZXRlTGlzdGVuZXIiLCJsaXZlU3RlcCIsInN0ZXAiLCJuIiwiYW5pbUFycnkiLCJBcnJheSIsImFuaW1hbEFycmF5IiwiaiIsImFuaW1UeXBlIiwiY2xlYXJUeXBlIiwicHVzaCIsIm15UmFuZCIsImsiLCJzY2hlZHVsZSIsIk1hdGgiLCJyYW5kb20iLCJNaW51c1N0ZXAiLCJtb3ZlIiwiTW92ZSIsIm5ld2FycnkiLCJjbGVhciIsIk5ld0ZpbGxlZCIsImdhbWVfY29kZSIsImNvaW4iLCJmbG9vciIsIl9zY29yZSIsInN0YXJzIiwiR2V0U3Rhck51bSIsImdyYWwiLCJzdGF0dXMiLCJlbmRHYW1lQ2FsbEJhY2siLCJsZXZlbF9zdGFycyIsImVuZXJneSIsIk51bWJlciIsImdvbGQiLCJzY3UiLCJhcnIiLCJuZXdhcnIiLCJzcGxpY2UiLCJyZW1vdmVDb21wb25lbnQiLCJMYXlvdXQiLCJ4eSIsImNvbnZldE90aGVyTm9kZVNwYWNlQVIiLCJ4IiwieSIsImN1YmVNZ3IiLCJCZWdpblJlbWluZGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztlQUFtQkEsT0FBTyxDQUFDLFdBQUQ7SUFBbEJDLGtCQUFBQTs7QUFDUkMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFVBQVUsRUFBRSxDQUFDSixFQUFFLENBQUNLLElBQUosQ0FESjtBQUVSQyxJQUFBQSxRQUFRLEVBQUUsQ0FBQ04sRUFBRSxDQUFDSyxJQUFKLENBRkY7QUFHUjtBQUNBRSxJQUFBQSxZQUFZ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QjtBQUNBcEIsY0FBQUEsRUFBRSxDQUFDaUIsRUFBSCxDQUFNMEgsT0FBTixDQUFjQyxhQUFkO0FBQ0g7QUFDSixXQVBELENBT0V0RixJQVBGLENBT08sSUFQUCxDQURNLEVBU04sSUFUTSxDQUFWO0FBV0g7QUFDSixPQW5CRCxDQW1CRUEsSUFuQkYsQ0FtQk8sSUFuQlAsQ0FETSxFQXFCTixJQXJCTSxDQUFWO0FBdUJILEtBeEJELENBd0JFQSxJQXhCRixDQXdCTyxJQXhCUCxDQURKO0FBMkJIO0FBeFVJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgVUlIZWxwIH0gPSByZXF1aXJlKCcuLi9VSUhlbHAnKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICB0YXJnZXRMaXN0OiBbY2MuTm9kZV0sXHJcbiAgICAgICAgYW5pbUxpc3Q6IFtjYy5Ob2RlXSxcclxuICAgICAgICAvL+iDnOWIqemdouadv1xyXG4gICAgICAgIHNjdWVzc1ByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIC8v5aSx6LSl6Z2i5p2/XHJcbiAgICAgICAgRW5kUHJlZmFiOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgU2N1TG9nbzogY2MuUHJlZmFiLFxyXG4gICAgICAgIC8v56e75Yqo55qE6aKE5Yi25L2TXHJcbiAgICAgICAgbW92ZVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIC8v6KaB6K6+572u55qE5L2N572uXHJcbiAgICAgICAgTW92ZVN0YXJ0UG9zOiBjYy5Ob2RlLFxyXG5cclxuICAgICAgICAvL+W8gOWni+ebruagh+WKqOeUu1xyXG4gICAgICAgIHRhcmdldEFuaW06IGNjLk5vZGUsXHJcbiAgICAgICAgbWFza05vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgbGF5b3V0OiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgY2MuWkwudGFyZ2V0TWdyID0gdGhpcztcclxuICAgICAgICB0aGlzLlNob3dUYXJnZXQoKTtcclxuICAgICAgICB0aGlzLm1hc2tOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5Jc1NjdWVzc2VkID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuQmVnaW5BbmltKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVwZGF0ZSAoZHQpIHt9LFxyXG4gICAgLy/mmL7npLrnm67moIfkv6Hmga9cclxuICAgIFNob3dUYXJnZXQoKSB7XHJcbiAgICAgICAgLy8gbGV0IGx2dGFyZ2V0PWx2ZGF0YVtcIkx2XCIrY29tZUluZm8ubm93X2x2XS50YXJnZXQ7XHJcbiAgICAgICAgbGV0IGx2dGFyZ2V0ID0gbHZkYXRhLnRhcmdldDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IGx2dGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRMaXN0W2ldLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobHZ0YXJnZXRbaV1bMF0gPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUxpc3RbaV0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBjYy5aTC5zcHJNZ3Iuc3ByW2x2dGFyZ2V0W2ldWzBdXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltTGlzdFtpXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IGNjLlpMLnNwck1nci5pY2VzcHJbbHZ0YXJnZXRbaV1bMF0gLSAxMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRMaXN0W2ldLmdldENoaWxkQnlOYW1lKCdudW0nKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGx2dGFyZ2V0W2ldWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRMaXN0W2ldLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltTGlzdFtpXS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjbGVhclRhcmdldChub2RlLCBudW0pIHtcclxuICAgICAgICAvL+eul+WHuuWKqOeJqeeahOWdkOagh1xyXG4gICAgICAgIHRoaXMudGFyZ2V0TnVtKG51bSk7XHJcbiAgICAgICAgdmFyIHBvcyA9IG5vZGUucGFyZW50LmNvbnZlcnRUb1dvcmxkU3BhY2VBUihub2RlLmdldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgIHZhciBwb3MxID0gdGhpcy50YXJnZXRMaXN0W251bV0uY29udmVydFRvTm9kZVNwYWNlQVIocG9zKTtcclxuICAgICAgICBub2RlLnBhcmVudCA9IHRoaXMudGFyZ2V0TGlzdFtudW1dO1xyXG4gICAgICAgIG5vZGUuc2V0UG9zaXRpb24ocG9zMSk7XHJcbiAgICAgICAgbm9kZS5ydW5BY3Rpb24oY2MubW92ZVRvKDAuNSwgMCwgMCkpO1xyXG4gICAgICAgIG5vZGUucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC41LCAwLjIsIDAuMikpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC4yLCAxLjQsIDEuNCkpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAyMDBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgNTAwXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbiAgICAvL+acieaViOebruagh+aVsOWHjzFcclxuICAgIHRhcmdldE51bShudW0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn55uu5qCH5pWwLS0tLS0tJyk7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0TGlzdFtudW1dLmdldENoaWxkQnlOYW1lKCdudW0nKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRMaXN0W251bV0uZ2V0Q2hpbGRCeU5hbWUoJ251bScpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nIC09IDE7XHJcbiAgICAgICAgICAgIC8vdGhpcy5udW1fYXJyeVtudW1dIC09MTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3RoaXMubnVtX2FycnlbbnVtXSA9MDtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRMaXN0W251bV0uZ2V0Q2hpbGRCeU5hbWUoJ251bScpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/liKTmlq3mmK/lkKbmiJDlip9cclxuICAgIElzU2N1ZXNzKCkge1xyXG4gICAgICAgIGxldCBzYyA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhcmdldExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0TGlzdFtpXS5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldExpc3RbaV0uZ2V0Q2hpbGRCeU5hbWUoJ251bScpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNjLlpMLlVJTWdyLnN0ZXBudW0gPD0gMCAmJiBzYyA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uR2V0RGF0YSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNjKSB7XHJcbiAgICAgICAgICAgIGNjLlpMLmFuaW1NZ3IubWFzay5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wYXVzZUFsbCgpO1xyXG4gICAgICAgICAgICBjYy5aTC5tdXNpY01nci5NeXBsYXlNdXNpYygxNiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNjdWVmZigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uR2V0RGF0YSgpIHtcclxuICAgICAgICBsZXQgcHJlYXMgPSB7XHJcbiAgICAgICAgICAgIHJpZDogZ2FtZWRhdGEucmlkLFxyXG4gICAgICAgICAgICB0b2tlbjogZ2FtZWRhdGEudG9rZW4sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBVSUhlbHAubmV0d29yay5odHRwQ29ubmVjdF9wb3N0X2FzeW5jKCdnYW1lL3hpYW94aWFvbGUvZ2V0UHJvcExpc3QnLCBwcmVhcywgdGhpcy5nZXRNeVByb3BMaXN0Q2FsbC5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TXlQcm9wTGlzdENhbGwobXNnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2dldE15UHJvcExpc3Q9PT0+JywgbXNnKTtcclxuICAgICAgICB1dGlscy5IaWRlTG9hZGluZygpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgdmFyIG51bSA9IDA7XHJcbiAgICAgICAgICAgIGlmIChtc2cuZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBhID0gMDsgYSA8IG1zZy5kYXRhLmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5kYXRhW2FdWydnaWQnXSA9PSAxMDAwNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW0gPSBtc2cuZGF0YVthXVsnY29pbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5aTC5hbmltTWdyLm1hc2suYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IGVuZCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuRW5kUHJlZmFiKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBhcmVudC5hZGRDaGlsZChlbmQpO1xyXG4gICAgICAgICAgICBlbmQuc2V0UG9zaXRpb24oMCwgMCk7XHJcbiAgICAgICAgICAgIGVuZC5nZXRDb21wb25lbnQoJ0VuZCcpLkluaXRWaWV3KG51bSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXRpbHMuYWRkVGlwcyhtc2cubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6IOc5Yip54m55pWIXHJcbiAgICBzY3VlZmYoKSB7XHJcbiAgICAgICAgdGhpcy5Jc1NjdWVzc2VkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgbG9nbyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2N1TG9nbyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKGxvZ28pO1xyXG4gICAgICAgIGxldCBhbmltID0gbG9nby5nZXRDaGlsZEJ5TmFtZSgnaW5nYW1lX0NsZWFyJykuZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKTtcclxuICAgICAgICBhbmltLmNsZWFyVHJhY2tzKCk7XHJcbiAgICAgICAgYW5pbS5hZGRBbmltYXRpb24oMCwgJ25vcm1hbCcsIGZhbHNlLCAwKTtcclxuICAgICAgICBhbmltLnNldENvbXBsZXRlTGlzdGVuZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxvZ28uZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvZ28pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpdmVTdGVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG4gICAgLy/ov5jlianlpJrlsJHmraVcclxuICAgIGxpdmVTdGVwKCkge1xyXG4gICAgICAgIGxldCBzdGVwID0gY2MuWkwuVUlNZ3Iuc3RlcG51bTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy/lhYjojrflj5bliqjnianmlbDnu4TkuK3miYDmnInliqjnialcclxuICAgICAgICBsZXQgYW5pbUFycnkgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheVtpXVtqXSAhPSAwICYmIGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbaV1bal0gIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheVtpXVtqXS5hbmltVHlwZSAhPSAwICYmIGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbaV1bal0uYW5pbVR5cGUgPCA2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W2ldW2pdLmNsZWFyVHlwZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltQXJyeS5wdXNoKGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbaV1bal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5YaN5LuO5Yqo54mp5Lit6ZqP5py65oq95Y+WTuS4quS4jeWQjOeahOWKqOeJqVxyXG4gICAgICAgIGlmIChzdGVwID4gYW5pbUFycnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHN0ZXAgPSBhbmltQXJyeS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFuaW1BcnJ5ID0gdGhpcy5teVJhbmQoYW5pbUFycnksIHN0ZXApO1xyXG4gICAgICAgIGxldCBrID0gMDtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbnVtID0gTWF0aC5yYW5kb20oKSAqIDI7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1BcnJ5W2tdLmNsZWFyVHlwZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1BcnJ5W2tdLmNsZWFyVHlwZSA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYy5aTC5tdXNpY01nci5NeXBsYXlNdXNpYygyMCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY2MuWkwuVUlNZ3IuTWludXNTdGVwKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW92ZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMubW92ZVByZWZhYik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQobW92ZSk7XHJcbiAgICAgICAgICAgICAgICBtb3ZlLnNldFBvc2l0aW9uKHRoaXMuTW92ZVN0YXJ0UG9zLmdldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgbW92ZS5nZXRDb21wb25lbnQoJ0VuZE1vdmUnKS5Nb3ZlKGFuaW1BcnJ5W2tdLCBudW0pO1xyXG4gICAgICAgICAgICAgICAgayArPSAxO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIDAuMyxcclxuICAgICAgICAgICAgc3RlcCAtIDFcclxuICAgICAgICApO1xyXG4gICAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdhcnJ5ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAvL+aKiuW4pueJueaViOeahOWFqOmDqOa2iOmZpFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvY29zPT09PicsIGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXkpXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbaV1bal0gIT0gMCAmJiBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W2ldW2pdICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheVtpXVtqXS5hbmltVHlwZSAhPSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheVtpXVtqXS5hbmltVHlwZSA8IDZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W2ldW2pdLmNsZWFyVHlwZSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld2FycnkucHVzaChjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W2ldW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY29jb3M9PT0+JywgY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheSlcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybjtcclxuICAgICAgICAgICAgICAgIC8v5ZCv5Yqo5raI6Zmk56iL5bqPXHJcbiAgICAgICAgICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlKFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+acieeJueaViOeahD09PicsIG5ld2FycnksIG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdhcnJ5W25dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdhcnJ5W25dLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbiArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9LmJpbmQodGhpcyksIDAuMSwgc3RlcCAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIDAuMSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdhcnJ5Lmxlbmd0aCAtIDFcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvL+S4i+S4gOatpeWhq+WFhVxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLlpMLmFuaW1NZ3IuTmV3RmlsbGVkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlYXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWQ6IGdhbWVkYXRhLnJpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBnYW1lZGF0YS50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVfY29kZTogZ2FtZWRhdGEuZ2FtZV9jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29pbjogTWF0aC5mbG9vcihjYy5aTC5VSU1nci5fc2NvcmUgLyAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJzOiBjYy5aTC5VSU1nci5HZXRTdGFyTnVtKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFsOiBjYy5aTC5VSU1nci5fc2NvcmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJSGVscC5uZXR3b3JrLmh0dHBDb25uZWN0X3Bvc3RfYXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2FtZS94aWFveGlhb2xlL2VuZEdhbWUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlYXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZEdhbWVDYWxsQmFjay5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCBzY3U9Y2MuaW5zdGFudGlhdGUodGhpcy5zY3Vlc3NQcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm5vZGUucGFyZW50LmFkZENoaWxkKHNjdSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjdS5zZXRQb3NpdGlvbigwLDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3UuZ2V0Q29tcG9uZW50KFwiU2N1ZXNzXCIpLkluaXRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0uYmluZCh0aGlzKSwxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgMjAwICogbmV3YXJyeS5sZW5ndGggKyAyMDBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgNDAwICogc3RlcFxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVuZEdhbWVDYWxsQmFjayhtc2cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnZW5kR2FtZT09PT4nLCBtc2cpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSAyMDApIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5kYXRhLmxldmVsX3N0YXJzKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lZGF0YS5sZXZlbF9zdGFycyA9IG1zZy5kYXRhLmxldmVsX3N0YXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdhbWVkYXRhLmVuZXJneSA9IE51bWJlcihtc2cuZGF0YS5lbmVyZ3kpO1xyXG4gICAgICAgICAgICBnYW1lZGF0YS5nb2xkID0gTnVtYmVyKG1zZy5kYXRhLmNvaW4pO1xyXG4gICAgICAgICAgICBsZXQgc2N1ID0gY2MuaW5zdGFudGlhdGUodGhpcy5zY3Vlc3NQcmVmYWIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucGFyZW50LmFkZENoaWxkKHNjdSk7XHJcbiAgICAgICAgICAgIHNjdS5zZXRQb3NpdGlvbigwLCAwKTtcclxuICAgICAgICAgICAgc2N1LmdldENvbXBvbmVudCgnU2N1ZXNzJykuSW5pdFZpZXcoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1dGlscy5hZGRUaXBzKG1zZy5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/mlbDnu4TkuK3pmo/mnLrmir3lj5ZO5p2h5LiN6YeN5aSN55qE5pWw5o2uXHJcbiAgICBteVJhbmQoYXJyLCBudW0pIHtcclxuICAgICAgICBsZXQgbmV3YXJyID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW07IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFyci5sZW5ndGgpO1xyXG4gICAgICAgICAgICBuZXdhcnIucHVzaChhcnJbbl0pO1xyXG4gICAgICAgICAgICBhcnIuc3BsaWNlKG4sIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3YXJyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+W8gOWni+WKqOeUu1xyXG4gICAgQmVnaW5BbmltKCkge1xyXG4gICAgICAgIGxldCBhbmltID0gdGhpcy50YXJnZXRBbmltLmdldENvbXBvbmVudChzcC5Ta2VsZXRvbik7XHJcbiAgICAgICAgYW5pbS5jbGVhclRyYWNrcygpO1xyXG4gICAgICAgIGFuaW0uYWRkQW5pbWF0aW9uKDAsICdwbGF5JywgZmFsc2UsIDApO1xyXG4gICAgICAgIGFuaW0uc2V0Q29tcGxldGVMaXN0ZW5lcihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldEFuaW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0LnJlbW92ZUNvbXBvbmVudChjYy5MYXlvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRhcmdldExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeHkgPSB1dGlscy5jb252ZXRPdGhlck5vZGVTcGFjZUFSKHRoaXMudGFyZ2V0TGlzdFtpXSwgdGhpcy5hbmltTGlzdFtpXS5wYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbUxpc3RbaV0ucnVuQWN0aW9uKGNjLm1vdmVUbygxLCB4eS54LCB4eS55KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0QW5pbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRBbmltLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuWkwuYW5pbU1nci5tYXNrLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXNrTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLlpMLmN1YmVNZ3IuQmVnaW5SZW1pbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgMjAwMFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=