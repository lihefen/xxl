
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/newscripts/Mains/QQ.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '66275r2vdZAMZpOVS039JEY', 'QQ');
// newscripts/Mains/QQ.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    rowNum: -1,
    columnNum: -1,
    type: -1,
    typenum: -1
  },
  // onLoad () {},
  start: function start() {},
  // update (dt) {},
  InitQQ: function InitQQ(row, column, type) {
    this.rowNum = row;
    this.columnNum = column;
    this.type = type;
    this.node.setPosition(utils.rowColumnPosition(column, row));
    cc.ZL.animMgr.animalArray[this.rowNum][this.columnNum].can_move = false; // for(let i=0;i<lvdata["Lv"+comeInfo.now_lv].target.length;i++){
    //     if(lvdata["Lv"+comeInfo.now_lv].target[i][0]==this.type){

    for (var i = 0; i < lvdata.target.length; i++) {
      if (lvdata.target[i][0] == this.type) {
        this.typenum = i;
      }
    }
  },
  QQMove: function QQMove() {
    //有可能连续两次移动
    this.node.stopAllActions();
    var nextanim = this.RandAnim();

    if (nextanim != null) {
      //获取要移动到的位置
      var arow = nextanim.rowNum;
      var acolumn = nextanim.columnNum; //先清空在旧数组中的位置

      cc.ZL.iceMgr.UpArray[this.rowNum][this.columnNum] = 0; //将那个位置的动物设为可移动

      cc.ZL.animMgr.animalArray[this.rowNum][this.columnNum].can_move = true; //将要移动到下个位置设为这个对象

      cc.ZL.iceMgr.UpArray[arow][acolumn] = this; //将要移动到下个位置的动物设为不可移动

      cc.ZL.animMgr.animalArray[arow][acolumn].can_move = false;
      this.node.runAction(cc.jumpTo(comeInfo.qqmoveTime, utils.rowColumnPosition(acolumn, arow), 50, 1));
      this.rowNum = arow;
      this.columnNum = acolumn;
    } else {//console.log("不可移动");
    }
  },
  //随机选择周围的一个动物
  RandAnim: function RandAnim() {
    var around = new Array(); //上

    if (this.rowNum - 1 >= 0) {
      var anim = cc.ZL.animMgr.animalArray[this.rowNum - 1][this.columnNum];

      if (anim != 0 && anim != -1) {
        if (anim.animType > 0 && anim.animType <= 6 && anim.can_move) {
          around.push(anim);
        }
      }
    } //下


    if (this.rowNum + 1 < comeInfo.column) {
      var _anim = cc.ZL.animMgr.animalArray[this.rowNum + 1][this.columnNum];

      if (_anim != 0 && _anim != -1) {
        if (_anim.animType > 0 && _anim.animType <= 6 && _anim.can_move) {
          around.push(_anim);
        }
      }
    } //左


    if (this.columnNum - 1 >= 0) {
      var _anim2 = cc.ZL.animMgr.animalArray[this.rowNum][this.columnNum - 1];

      if (_anim2 != 0 && _anim2 != -1) {
        if (_anim2.animType > 0 && _anim2.animType <= 6 && _anim2.can_move) {
          around.push(_anim2);
        }
      }
    } //右


    if (this.columnNum + 1 < comeInfo.row) {
      var _anim3 = cc.ZL.animMgr.animalArray[this.rowNum][this.columnNum + 1];

      if (_anim3 != 0 && _anim3 != -1) {
        if (_anim3.animType > 0 && _anim3.animType <= 6 && _anim3.can_move) {
          around.push(_anim3);
        }
      }
    } //如果周围有可以移动的


    if (around.length > 0) {
      var Toanim = around[Math.floor(Math.random() * around.length)];
      return Toanim;
    } else {
      return null;
    }
  },
  clear: function clear() {
    if (this.type == 13) {
      cc.ZL.iceMgr.qqmoveNum -= 1;
      cc.ZL.animMgr.animalArray[this.rowNum][this.columnNum].can_move = true;
      cc.ZL.iceMgr.UpArray[this.rowNum][this.columnNum] = 0;

      if (this.typenum != -1) {
        cc.ZL.targetMgr.clearTarget(this.node, this.typenum);
      } else {
        this.node.destroy();
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9uZXdzY3JpcHRzL01haW5zL1FRLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwicm93TnVtIiwiY29sdW1uTnVtIiwidHlwZSIsInR5cGVudW0iLCJzdGFydCIsIkluaXRRUSIsInJvdyIsImNvbHVtbiIsIm5vZGUiLCJzZXRQb3NpdGlvbiIsInV0aWxzIiwicm93Q29sdW1uUG9zaXRpb24iLCJaTCIsImFuaW1NZ3IiLCJhbmltYWxBcnJheSIsImNhbl9tb3ZlIiwiaSIsImx2ZGF0YSIsInRhcmdldCIsImxlbmd0aCIsIlFRTW92ZSIsInN0b3BBbGxBY3Rpb25zIiwibmV4dGFuaW0iLCJSYW5kQW5pbSIsImFyb3ciLCJhY29sdW1uIiwiaWNlTWdyIiwiVXBBcnJheSIsInJ1bkFjdGlvbiIsImp1bXBUbyIsImNvbWVJbmZvIiwicXFtb3ZlVGltZSIsImFyb3VuZCIsIkFycmF5IiwiYW5pbSIsImFuaW1UeXBlIiwicHVzaCIsIlRvYW5pbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNsZWFyIiwicXFtb3ZlTnVtIiwidGFyZ2V0TWdyIiwiY2xlYXJUYXJnZXQiLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsTUFBTSxFQUFFLENBQUMsQ0FERDtBQUVSQyxJQUFBQSxTQUFTLEVBQUUsQ0FBQyxDQUZKO0FBR1JDLElBQUFBLElBQUksRUFBRSxDQUFDLENBSEM7QUFJUkMsSUFBQUEsT0FBTyxFQUFFLENBQUM7QUFKRixHQUhQO0FBVUw7QUFDQUMsRUFBQUEsS0FYSyxtQkFXRyxDQUVQLENBYkk7QUFlTDtBQUNBQyxFQUFBQSxNQWhCSyxrQkFnQkVDLEdBaEJGLEVBZ0JPQyxNQWhCUCxFQWdCZUwsSUFoQmYsRUFnQnFC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QUtDLFNBQTVDLEVBQXVEYyxRQUF2RCxHQUFrRSxJQUFsRTtBQUNBbkIsTUFBQUEsRUFBRSxDQUFDZ0IsRUFBSCxDQUFNYyxNQUFOLENBQWFDLE9BQWIsQ0FBcUIsS0FBSzNCLE1BQTFCLEVBQWtDLEtBQUtDLFNBQXZDLElBQW9ELENBQXBEOztBQUNBLFVBQUksS0FBS0UsT0FBTCxJQUFnQixDQUFDLENBQXJCLEVBQXdCO0FBQ3BCUCxRQUFBQSxFQUFFLENBQUNnQixFQUFILENBQU0rQixTQUFOLENBQWdCQyxXQUFoQixDQUE0QixLQUFLcEMsSUFBakMsRUFBdUMsS0FBS0wsT0FBNUM7QUFDSCxPQUZELE1BRU87QUFDSCxhQUFLSyxJQUFMLENBQVVxQyxPQUFWO0FBQ0g7QUFDSjtBQUNKO0FBaEhJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHJvd051bTogLTEsXHJcbiAgICAgICAgY29sdW1uTnVtOiAtMSxcclxuICAgICAgICB0eXBlOiAtMSxcclxuICAgICAgICB0eXBlbnVtOiAtMSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gb25Mb2FkICgpIHt9LFxyXG4gICAgc3RhcnQoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1cGRhdGUgKGR0KSB7fSxcclxuICAgIEluaXRRUShyb3csIGNvbHVtbiwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMucm93TnVtID0gcm93O1xyXG4gICAgICAgIHRoaXMuY29sdW1uTnVtID0gY29sdW1uO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5ub2RlLnNldFBvc2l0aW9uKHV0aWxzLnJvd0NvbHVtblBvc2l0aW9uKGNvbHVtbiwgcm93KSk7XHJcbiAgICAgICAgY2MuWkwuYW5pbU1nci5hbmltYWxBcnJheVt0aGlzLnJvd051bV1bdGhpcy5jb2x1bW5OdW1dLmNhbl9tb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gZm9yKGxldCBpPTA7aTxsdmRhdGFbXCJMdlwiK2NvbWVJbmZvLm5vd19sdl0udGFyZ2V0Lmxlbmd0aDtpKyspe1xyXG4gICAgICAgIC8vICAgICBpZihsdmRhdGFbXCJMdlwiK2NvbWVJbmZvLm5vd19sdl0udGFyZ2V0W2ldWzBdPT10aGlzLnR5cGUpe1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbHZkYXRhLnRhcmdldC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobHZkYXRhLnRhcmdldFtpXVswXSA9PSB0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHlwZW51bSA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgUVFNb3ZlKCkge1xyXG4gICAgICAgIC8v5pyJ5Y+v6IO96L+e57ut5Lik5qyh56e75YqoXHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgbGV0IG5leHRhbmltID0gdGhpcy5SYW5kQW5pbSgpO1xyXG4gICAgICAgIGlmIChuZXh0YW5pbSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8v6I635Y+W6KaB56e75Yqo5Yiw55qE5L2N572uXHJcbiAgICAgICAgICAgIGxldCBhcm93ID0gbmV4dGFuaW0ucm93TnVtO1xyXG4gICAgICAgICAgICBsZXQgYWNvbHVtbiA9IG5leHRhbmltLmNvbHVtbk51bTtcclxuXHJcbiAgICAgICAgICAgIC8v5YWI5riF56m65Zyo5pen5pWw57uE5Lit55qE5L2N572uXHJcbiAgICAgICAgICAgIGNjLlpMLmljZU1nci5VcEFycmF5W3RoaXMucm93TnVtXVt0aGlzLmNvbHVtbk51bV0gPSAwO1xyXG4gICAgICAgICAgICAvL+WwhumCo+S4quS9jee9rueahOWKqOeJqeiuvuS4uuWPr+enu+WKqFxyXG4gICAgICAgICAgICBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W3RoaXMucm93TnVtXVt0aGlzLmNvbHVtbk51bV0uY2FuX21vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvL+Wwhuimgeenu+WKqOWIsOS4i+S4quS9jee9ruiuvuS4uui/meS4quWvueixoVxyXG4gICAgICAgICAgICBjYy5aTC5pY2VNZ3IuVXBBcnJheVthcm93XVthY29sdW1uXSA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8v5bCG6KaB56e75Yqo5Yiw5LiL5Liq5L2N572u55qE5Yqo54mp6K6+5Li65LiN5Y+v56e75YqoXHJcbiAgICAgICAgICAgIGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbYXJvd11bYWNvbHVtbl0uY2FuX21vdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5qdW1wVG8oY29tZUluZm8ucXFtb3ZlVGltZSwgdXRpbHMucm93Q29sdW1uUG9zaXRpb24oYWNvbHVtbiwgYXJvdyksIDUwLCAxKSk7XHJcbiAgICAgICAgICAgIHRoaXMucm93TnVtID0gYXJvdztcclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5OdW0gPSBhY29sdW1uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLkuI3lj6/np7vliqhcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6ZqP5py66YCJ5oup5ZGo5Zu055qE5LiA5Liq5Yqo54mpXHJcbiAgICBSYW5kQW5pbSgpIHtcclxuICAgICAgICBsZXQgYXJvdW5kID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgLy/kuIpcclxuICAgICAgICBpZiAodGhpcy5yb3dOdW0gLSAxID49IDApIHtcclxuICAgICAgICAgICAgbGV0IGFuaW0gPSBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W3RoaXMucm93TnVtIC0gMV1bdGhpcy5jb2x1bW5OdW1dO1xyXG4gICAgICAgICAgICBpZiAoYW5pbSAhPSAwICYmIGFuaW0gIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltLmFuaW1UeXBlID4gMCAmJiBhbmltLmFuaW1UeXBlIDw9IDYgJiYgYW5pbS5jYW5fbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyb3VuZC5wdXNoKGFuaW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5LiLXHJcbiAgICAgICAgaWYgKHRoaXMucm93TnVtICsgMSA8IGNvbWVJbmZvLmNvbHVtbikge1xyXG4gICAgICAgICAgICBsZXQgYW5pbSA9IGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbdGhpcy5yb3dOdW0gKyAxXVt0aGlzLmNvbHVtbk51bV07XHJcbiAgICAgICAgICAgIGlmIChhbmltICE9IDAgJiYgYW5pbSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuaW0uYW5pbVR5cGUgPiAwICYmIGFuaW0uYW5pbVR5cGUgPD0gNiAmJiBhbmltLmNhbl9tb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJvdW5kLnB1c2goYW5pbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lt6ZcclxuICAgICAgICBpZiAodGhpcy5jb2x1bW5OdW0gLSAxID49IDApIHtcclxuICAgICAgICAgICAgbGV0IGFuaW0gPSBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W3RoaXMucm93TnVtXVt0aGlzLmNvbHVtbk51bSAtIDFdO1xyXG4gICAgICAgICAgICBpZiAoYW5pbSAhPSAwICYmIGFuaW0gIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltLmFuaW1UeXBlID4gMCAmJiBhbmltLmFuaW1UeXBlIDw9IDYgJiYgYW5pbS5jYW5fbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyb3VuZC5wdXNoKGFuaW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Y+zXHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uTnVtICsgMSA8IGNvbWVJbmZvLnJvdykge1xyXG4gICAgICAgICAgICBsZXQgYW5pbSA9IGNjLlpMLmFuaW1NZ3IuYW5pbWFsQXJyYXlbdGhpcy5yb3dOdW1dW3RoaXMuY29sdW1uTnVtICsgMV07XHJcbiAgICAgICAgICAgIGlmIChhbmltICE9IDAgJiYgYW5pbSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuaW0uYW5pbVR5cGUgPiAwICYmIGFuaW0uYW5pbVR5cGUgPD0gNiAmJiBhbmltLmNhbl9tb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJvdW5kLnB1c2goYW5pbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lpoLmnpzlkajlm7TmnInlj6/ku6Xnp7vliqjnmoRcclxuICAgICAgICBpZiAoYXJvdW5kLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IFRvYW5pbSA9IGFyb3VuZFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcm91bmQubGVuZ3RoKV07XHJcbiAgICAgICAgICAgIHJldHVybiBUb2FuaW07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgY2MuWkwuaWNlTWdyLnFxbW92ZU51bSAtPSAxO1xyXG4gICAgICAgICAgICBjYy5aTC5hbmltTWdyLmFuaW1hbEFycmF5W3RoaXMucm93TnVtXVt0aGlzLmNvbHVtbk51bV0uY2FuX21vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5aTC5pY2VNZ3IuVXBBcnJheVt0aGlzLnJvd051bV1bdGhpcy5jb2x1bW5OdW1dID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHlwZW51bSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY2MuWkwudGFyZ2V0TWdyLmNsZWFyVGFyZ2V0KHRoaXMubm9kZSwgdGhpcy50eXBlbnVtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=