{"version":3,"sources":["assets/newscripts/Advert.js"],"names":["window","Advert","VideoUrl","Video","VideoNum","handlers","InitVideoAdvert","cc","sys","platform","WECHAT_GAME","self","wx","createRewardedVideoAd","adUnitId","onError","err","console","log","onClose","res","isEnded","undefined","VideoPlay","videonum","fn","addHandlers","show","event","BananerUrl","bannerAd","InitBananerAdvert","Mwidth","Mheight","winSize","getSystemInfoSync","success","windowWidth","windowHeight","targetBannerAdWidth","Math","min","createBannerAd","style","left","top","width","parseInt","onResize","size","height","onLoad","errMsg","errCode","shares","ids","urls","WxShare","CC_WECHATGAME","idx1","floor","random","str","idx","id","url","shareAppMessage","title","imageUrlId","imageUrl","fail"],"mappings":"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","sourceRoot":"/","sourcesContent":["window.Advert={\r\n    VideoUrl:\"adunit-a357bf07ab218042\",\r\n    Video:null,    \r\n    VideoNum:0,  //1加体力  2 加精力\r\n    handlers:{},\r\n    //创建视频广告\r\n    InitVideoAdvert(){\r\n        if(cc.sys.platform!=cc.sys.WECHAT_GAME){\r\n            return;\r\n        }\r\n        var self=this;\r\n        if(self.Video==null){\r\n            self.Video=wx.createRewardedVideoAd({\r\n                adUnitId: self.VideoUrl\r\n            });\r\n            self.Video.onError(err => {\r\n                console.log(\"video play err：\"+err)\r\n            });\r\n            self.Video.onClose(function(res){\r\n                if (res && res.isEnded || res === undefined) {\r\n                    //正常播放结束，可以下发游戏奖励\r\n                    if(self.handlers[self.VideoNum]!=null){\r\n                        self.handlers[self.VideoNum]();\r\n                    }\r\n                    \r\n                }\r\n                else {\r\n                    // 播放中途退出，不下发游戏奖励\r\n                    console.log(\"see no all Video time \");\r\n                }\r\n            });\r\n        }\r\n    },\r\n    //播放广告\r\n    VideoPlay(videonum,fn){\r\n        if(this.Video!=null){\r\n            this.addHandlers(videonum,fn);\r\n            this.VideoNum=videonum;\r\n            this.Video.show();\r\n        }\r\n    },\r\n    addHandlers(event,fn){\r\n        this.handlers[event]=fn;\r\n    },\r\n    //bananer广告地址\r\n    BananerUrl:\"adunit-b23f524044082380\",\r\n    bannerAd:null,\r\n    //创建bananer广告\r\n    InitBananerAdvert(){\r\n        if(cc.sys.platform!=cc.sys.WECHAT_GAME){\r\n            return;\r\n        }\r\n        var Mwidth;//获取屏幕宽度\r\n        var Mheight;//获取屏幕高度\r\n        let winSize = wx.getSystemInfoSync({\r\n            success(res) {\r\n                Mwidth = res.windowWidth;\r\n                Mheight = res.windowHeight;\r\n            }\r\n        });\r\n        var targetBannerAdWidth = Math.min(Mwidth,300);//最大宽度300\r\n        // 创建 Banner 广告实例，提前初始化\r\n        this.bannerAd = wx.createBannerAd({\r\n            adUnitId: 'adunit-b23f524044082380',\r\n            style: {\r\n                left: 0,\r\n                top:650,\r\n                width:parseInt(targetBannerAdWidth),\r\n            }\r\n        })\r\n        let self=this;\r\n        // 在banner广告首次显示的时候会触发\r\n        this.bannerAd.onResize(size => {\r\n            console.log(\"onResize\", Mwidth - size.width, Mheight - size.height);\r\n            // 如果一开始设置的 banner 宽度超过了系统限制，可以在此处加以调整\r\n            self.bannerAd.style.left = (Mwidth - size.width)/2;\r\n            self.bannerAd.style.top = Mheight - size.height;\r\n            //这行是为了在QQ小游戏中能正确显示位置.如果是微信则不需要这句\r\n            // setTimeout(function () {\r\n            //     slef.bannerAd.style.left = (windowWidth - size.width)/2;\r\n            //     self.bannerAd.style.top = windowHeight - size.height;\r\n            // }, 0.5);\r\n        });\r\n        this.bannerAd.onLoad(() => {\r\n            console.log('banner广告加载成功!!!!');\r\n        })\r\n        this.bannerAd.onError((errMsg, errCode) => {\r\n            console.log('banner广告加载失败!!!!', errMsg, errCode);\r\n        })\r\n\r\n        // 在适合的场景显示 Banner 广告\r\n        //this.bannerAd.show()\r\n    },\r\n    //-------分享--------------------------------------------------------------------------\r\n    shares://分享语\r\n    [\r\n    \"给你几张图，你能猜到我的意思吗？\",\r\n    \"智商150的人才能玩的懂的游戏，你要来挑战自己吗？\",\r\n    \"百因必有果，你的报应就是找我\",\r\n    \"最解压的游戏，还不来放松一下？\",\r\n    \"好友@你并且送了你神秘礼物，点击查看！\",\r\n    ],\r\n    ids:[//分享图片id\r\n    \"IJ8K-FU4Q7GAB5PSmSSp7w\",\r\n    \"VxCAcv-kQKm7XBJAhYV_Pw\",\r\n    ],\r\n    urls:[//分享图片地址\r\n    \"https://mmocgame.qpic.cn/wechatgame/2hicsK0eD9ib3RibqpPs4hoPLnNlCdmlPiaq4bn0IJLwQaKVkYNCNFBDSGVz2zvx5HyT/0\",\r\n    \"https://mmocgame.qpic.cn/wechatgame/5VJ9SqQdMn4cPK8EV69iaxjCGHeYz9ne2gMgx4pm8BPtfGr3YXozyB4GcjXMSV5HI/0\",\r\n    ],\r\n    WxShare(){\r\n        //comeInfo.is_share=true;\r\n        if(CC_WECHATGAME){\r\n            let idx1 = Math.floor(Math.random()*5);//向下取整\r\n            let str = this.shares[idx1];\r\n            let idx = Math.floor(Math.random()*2);//向下取整\r\n            var id = this.ids[idx]; // 通过 MP 系统审核的图片编号\r\n            var url = this.urls[idx]; // 通过 MP 系统审核的图片地址\r\n            wx.shareAppMessage({\r\n                title:str,\r\n                imageUrlId:id,\r\n                imageUrl: url,\r\n                success(res) {\r\n                    console.log(\"成功\");\r\n                },\r\n                fail(res) {\r\n                    console.log(\"失败\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n}"]}