{"version":3,"sources":["assets/newscripts/Main/UI.js"],"names":["cc","Class","Component","properties","lvLabel","Label","stepnum","stepLabel","_score","socreProcess","ProgressBar","scoreLabel","logo","Node","add_score","end","Prefab","xing1","xing2","xing3","onLoad","ZL","animMgr","mask","active","UIMgr","showInfo","start","string","comeInfo","now_lv","lvdata","step","AddScore","num","bar","one_star","progress","sum","GetStarNum","x","MinusStep","AddFiveStep","AddTwoStep","EndOver","e","instantiate","node","addChild","setPosition","getComponent","InitView"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //关卡显示框\r\n        lvLabel: cc.Label,\r\n        stepnum: -1,\r\n        //步数显示框\r\n        stepLabel: cc.Label,\r\n        //分数\r\n        _score: 0,\r\n        //分数进度条\r\n        socreProcess: cc.ProgressBar,\r\n        //分数显示框\r\n        scoreLabel: cc.Label,\r\n        //蝴蝶Logo\r\n        logo: cc.Node,\r\n\r\n        add_score: 150,\r\n\r\n        //失败预制体\r\n        end: cc.Prefab,\r\n\r\n        xing1: cc.Node,\r\n        xing2: cc.Node,\r\n        xing3: cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n         cc.ZL.animMgr.mask.active = true;\r\n        cc.ZL.UIMgr = this;\r\n        this.showInfo();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n    showInfo() {\r\n        this.lvLabel.string = '第' + comeInfo.now_lv + '关';\r\n        // this.stepnum=lvdata[\"Lv\"+comeInfo.now_lv].step;\r\n        this.stepnum = lvdata.step;\r\n        this.stepLabel.string = this.stepnum;\r\n        this.AddScore(0);\r\n    },\r\n    //更新分数显示\r\n    AddScore(num) {\r\n        this._score += num;\r\n        this.scoreLabel.string = this._score;\r\n        // let bar=this._score/(lvdata[\"Lv\"+comeInfo.now_lv].one_star*3);\r\n        let bar = this._score / (lvdata.one_star * 3);\r\n        this.socreProcess.progress = bar;\r\n        let sum = this.GetStarNum();\r\n        switch (sum) {\r\n            case 3:\r\n                this.xing3.active = true;\r\n                this.xing2.active = true;\r\n                this.xing1.active = true;\r\n                break;\r\n            case 2:\r\n                this.xing3.active = false;\r\n                this.xing2.active = true;\r\n                this.xing1.active = true;\r\n                break;\r\n\r\n            case 1:\r\n                this.xing3.active = false;\r\n                this.xing2.active = false;\r\n                this.xing1.active = true;\r\n                break;\r\n            case 0:\r\n                this.xing3.active = false;\r\n                this.xing2.active = false;\r\n                this.xing1.active = false;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (bar >= 1) {\r\n            bar = 1;\r\n        }\r\n        this.logo.x = bar * 700;\r\n    },\r\n    //减步数\r\n    MinusStep() {\r\n        this.stepnum -= 1;\r\n        if (this.stepnum <= 0) {\r\n            this.stepnum = 0;\r\n            //this.EndOver();\r\n        }\r\n        this.stepLabel.string = this.stepnum;\r\n    },\r\n    //加5步\r\n    AddFiveStep() {\r\n        this.stepnum += 5;\r\n        this.stepLabel.string = this.stepnum;\r\n    },\r\n    AddTwoStep() {\r\n        this.stepnum += 2;\r\n        this.stepLabel.string = this.stepnum;\r\n    },\r\n    //计算显示几颗星\r\n    GetStarNum() {\r\n        // if(this._score>(lvdata[\"Lv\"+comeInfo.now_lv].one_star*3)){\r\n        //     return 3;\r\n        // }else if(this._score>(lvdata[\"Lv\"+comeInfo.now_lv].one_star*2)){\r\n        //     return 2;\r\n        // }else if(this._score>(lvdata[\"Lv\"+comeInfo.now_lv].one_star)){\r\n        //     return 1;\r\n        // }else {\r\n        //     return 0;\r\n        // }\r\n        if (this._score > (lvdata.one_star * 3)) {\r\n            return 3;\r\n        } else if (this._score > (lvdata.one_star * 2)) {\r\n            return 2;\r\n        } else if (this._score > (lvdata.one_star)) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    },\r\n    //失败\r\n    EndOver() {\r\n        let e = cc.instantiate(this.end);\r\n        this.node.addChild(e);\r\n        e.setPosition(0, 0);\r\n        e.getComponent(\"End\").InitView();\r\n    }\r\n});\r\n"]}