{"version":3,"sources":["assets/newscripts/Main/Touch.js"],"names":["require","debug","UIHelp","cc","Class","Component","properties","onLoad","animal","start","node","on","Node","EventType","TOUCH_START","event","console","log","pos","getLocation","convertToNodeSpace","selectPos","ZL","animMgr","animalArray","y","x","gamedata","is_prop","pos1","musicMgr","MyplayMusic","selectFirstAnimal","DaoJuChui","clearType","clear","setTimeout","NewFilled","comeInfo","animalClearTime","PropMgr","propFinished","proChangePos","mask","active","bind","TOUCH_END","pos2","undefined","x_dis","y_dis","Math","abs","columnNum","Rnode","v2","Lnode","rowNum","UPnode","Dnode","TOUCH_CANCEL","floor","data","preas","rid","token","gid","num","onMuChuiCallBack","code","message","error","utils","addTips","msg"],"mappings":"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","sourceRoot":"/","sourcesContent":["const { debug } = require('console');\r\nconst { UIHelp } = require('../UIHelp');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {},\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.animal = null;\r\n    },\r\n\r\n    start() {\r\n        this.node.on(\r\n            cc.Node.EventType.TOUCH_START,\r\n            function (event) {\r\n                console.log('TOUCH_START');\r\n                this.pos = event.getLocation();\r\n                console.log(this.pos, 'this.pos');\r\n                this.pos = this.node.convertToNodeSpace(this.pos);\r\n                this.pos = this.selectPos(this.pos);\r\n\r\n                console.log(this.pos, 'this.pos');\r\n                let animal = cc.ZL.animMgr.animalArray[this.pos.y][this.pos.x];\r\n                if (gamedata.is_prop == 0) {\r\n                    //普通操作\r\n                    this.pos1 = event.getLocation();\r\n                    cc.ZL.musicMgr.MyplayMusic(0, false); //播放点击音效\r\n                    cc.ZL.animMgr.selectFirstAnimal(this.pos);\r\n                } else if (gamedata.is_prop == 1) {\r\n                    //1小木槌\r\n                    this.DaoJuChui(animal);\r\n                    // animal.clear();\r\n                    // cc.ZL.PropMgr.propFinished(1);\r\n                    // cc.ZL.animMgr.NewFilled();\r\n                } else if (gamedata.is_prop == 2) {\r\n                    //2爆弹\r\n                    animal.clearType = 3;\r\n                    animal.clear();\r\n                    setTimeout(function () {\r\n                        cc.ZL.animMgr.NewFilled();\r\n                    }, comeInfo.animalClearTime * 1000);\r\n                    cc.ZL.PropMgr.propFinished(2);\r\n                } else if (gamedata.is_prop == 3) {\r\n                    //3交换位置\r\n                    cc.ZL.animMgr.proChangePos(animal);\r\n                } else if (gamedata.is_prop == 4) {\r\n                    //4横向\r\n                    cc.ZL.animMgr.mask.active = true;\r\n                    animal.clearType = 1;\r\n                    animal.clear();\r\n                    setTimeout(function () {\r\n                        cc.ZL.animMgr.NewFilled();\r\n                    }, comeInfo.animalClearTime * 1000);\r\n                    cc.ZL.PropMgr.propFinished(4);\r\n                } else if (gamedata.is_prop == 5) {\r\n                    //5纵向\r\n                    cc.ZL.animMgr.mask.active = true;\r\n                    animal.clearType = 2;\r\n                    animal.clear();\r\n                    setTimeout(function () {\r\n                        cc.ZL.animMgr.NewFilled();\r\n                    }, comeInfo.animalClearTime * 1000);\r\n                    cc.ZL.PropMgr.propFinished(5);\r\n                }\r\n            }.bind(this)\r\n        );\r\n        this.node.on(\r\n            cc.Node.EventType.TOUCH_END,\r\n            function (event) {\r\n                console.log('TOUCH_END');\r\n                console.log(gamedata);\r\n                if (gamedata.is_prop != 0) {\r\n                    //使用道具\r\n                    return;\r\n                }\r\n                this.pos2 = event.getLocation();\r\n                console.log(this.pos1, 'this.po1');\r\n                console.log(this.pos2, 'this.pos2');\r\n                if (this.pos1 == undefined || this.pos1 == null) {\r\n                    console.log('无法获取目标');\r\n                    return;\r\n                }\r\n                console.log(this.pos1.x, '无法获取目标');\r\n                let x_dis = this.pos2.x - this.pos1.x;\r\n                let y_dis = this.pos2.y - this.pos1.y;\r\n                if (Math.abs(x_dis) > Math.abs(y_dis)) {\r\n                    if (x_dis > 5) {\r\n                        //向右移动\r\n                        if (this.columnNum >= 8) {\r\n                            //范围限制\r\n                            return;\r\n                        }\r\n                        let Rnode = cc.v2(this.pos.x + 1, this.pos.y);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Rnode);\r\n                    } else if (x_dis < -5) {\r\n                        //向左移动\r\n                        if (this.columnNum <= 0) {\r\n                            //范围限制\r\n                            return;\r\n                        }\r\n                        var Lnode = cc.v2(this.pos.x - 1, this.pos.y);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Lnode);\r\n                    }\r\n                } else {\r\n                    //纵向移动\r\n                    if (y_dis > 5) {\r\n                        //向上\r\n                        if (this.rowNum <= 0) {\r\n                            return;\r\n                        }\r\n                        var UPnode = cc.v2(this.pos.x, this.pos.y - 1);\r\n                        cc.ZL.animMgr.selectFirstAnimal(UPnode);\r\n                    } else if (y_dis < -5) {\r\n                        if (this.rowNum >= 8) {\r\n                            return;\r\n                        }\r\n                        var Dnode = cc.v2(this.pos.x, this.pos.y + 1);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Dnode);\r\n                    }\r\n                }\r\n                this.pos1 = null;\r\n                this.pos2 = null;\r\n            }.bind(this)\r\n        );\r\n        this.node.on(\r\n            cc.Node.EventType.TOUCH_CANCEL,\r\n            function (event) {\r\n                console.log('TOUCH_CANCEL');\r\n                if (gamedata.is_prop != 0) {\r\n                    //使用道具\r\n                    return;\r\n                }\r\n                this.pos2 = event.getLocation();\r\n                if (this.pos1 == undefined || this.pos1 == null) {\r\n                    console.log('无法获取目标');\r\n                    return;\r\n                }\r\n                let x_dis = this.pos2.x - this.pos1.x;\r\n                let y_dis = this.pos2.y - this.pos1.y;\r\n                if (Math.abs(x_dis) > Math.abs(y_dis)) {\r\n                    if (x_dis > 5) {\r\n                        //向右移动\r\n                        if (this.columnNum >= 8) {\r\n                            //范围限制\r\n                            return;\r\n                        }\r\n                        let Rnode = cc.v2(this.pos.x + 1, this.pos.y);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Rnode);\r\n                    } else if (x_dis < -5) {\r\n                        //向左移动\r\n                        if (this.columnNum <= 0) {\r\n                            //范围限制\r\n                            return;\r\n                        }\r\n                        var Lnode = cc.v2(this.pos.x - 1, this.pos.y);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Lnode);\r\n                    }\r\n                } else {\r\n                    //纵向移动\r\n                    if (y_dis > 5) {\r\n                        //向上\r\n                        if (this.rowNum <= 0) {\r\n                            return;\r\n                        }\r\n                        var UPnode = cc.v2(this.pos.x, this.pos.y - 1);\r\n                        cc.ZL.animMgr.selectFirstAnimal(UPnode);\r\n                    } else if (y_dis < -5) {\r\n                        if (this.rowNum >= 8) {\r\n                            return;\r\n                        }\r\n                        var Dnode = cc.v2(this.pos.x, this.pos.y + 1);\r\n                        cc.ZL.animMgr.selectFirstAnimal(Dnode);\r\n                    }\r\n                }\r\n                this.pos1 = null;\r\n                this.pos2 = null;\r\n            }.bind(this)\r\n        );\r\n    },\r\n\r\n    // update (dt) {},\r\n    //将点击的像素点转变为对应的格子\r\n    selectPos(pos) {\r\n        if (pos.x < 0 || pos.x >= 720 || pos.y < 0 || pos.y >= 720) {\r\n            return false;\r\n        }\r\n        var x = Math.floor(pos.x / 80);\r\n        var y = 8 - Math.floor(pos.y / 80);\r\n        return cc.v2(x, y);\r\n    },\r\n\r\n    DaoJuChui(data) {\r\n        this.animal = data;\r\n        try {\r\n            this.animal.clear();\r\n            let preas = {\r\n                rid: gamedata.rid,\r\n                token: gamedata.token,\r\n                gid: 10001,\r\n                num: 1,\r\n            };\r\n            // TODO:先注释掉\r\n            // UIHelp.network.httpConnect_post_async('game/xiaoxiaole/consumeProp', preas, this.onMuChuiCallBack.bind(this));\r\n            this.onMuChuiCallBack({\r\n                code: '200',\r\n                message: '成功',\r\n            });\r\n        } catch (error) {\r\n            utils.addTips('不可消除');\r\n        }\r\n\r\n        // animal.clear();\r\n        // cc.ZL.PropMgr.propFinished(1);\r\n        // cc.ZL.animMgr.NewFilled();\r\n    },\r\n\r\n    // 锤子执行\r\n    onMuChuiCallBack(msg) {\r\n        console.log('onMuChuiCallBack===>', msg);\r\n        if (msg.code == 200) {\r\n            // this.animal.clear();\r\n            cc.ZL.PropMgr.propFinished(1);\r\n            cc.ZL.animMgr.NewFilled();\r\n        } else {\r\n            utils.addTips(msg.message);\r\n        }\r\n    },\r\n});\r\n"]}