{"version":3,"sources":["assets/newscripts/Main/Animal.js"],"names":["cc","Class","Component","properties","columnNum","rowNum","animalMgr","animType","clearType","can_move","is_clear","start","update","dt","initAnimal","columnnum","rownum","pos","node","sacle","Math","floor","random","lvdata","Anim","width","height","getComponent","Sprite","spriteFrame","ZL","sprMgr","spr","setPosition","utils","rowColumnPosition_Anim","AddPos","animalArray","p","push","FilledMove","action","length","stopAllActions","i","fn1","moveTo","comeInfo","animalMoveTime","easing","easeElasticOut","fn2","scaleTo","fn3","fn","spawn","sequence","runAction","AnimMove","clear","UIMgr","AddScore","add_score","clearObstacle","FindUP","effMgr","CreatRowEff","getPosition","RowClear","ColumnClear","CreatBoomEff","RangeClear","TypeClear","ClearSelf","iceMgr","UpArray","Mchilds","children","destroy","iceArray","setTimeout","FindAround","targetnum","isTarget","CreatClearEff","LabelMgr","creatLabel","animalClearTime","animalPool","put","bind","targetMgr","clearTarget","deleteMuBiao","targetNum","anim","column","row","name","musicMgr","PlayMusicOnly","animtargetnum","lvtarget","target","creatRowEff","bol","dirEff","playAnim","MyplayMusic","creatColnumEff","CreatTEff","TEff","CreatFiveEff","CratNiao","type","Animspr","Animation","play","stopAnim","stop"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //列号\r\n        columnNum: -1,\r\n        //行号\r\n        rowNum: -1,\r\n        //管理器\r\n        animalMgr: null,\r\n        //动物的类型\r\n        animType: 0, //0障碍物，1狗,2猴子，3鸟，4猫，5羊  6魔力鸟\r\n        //消除类型 0普通1横向2纵向3范围4魔力鸟\r\n        clearType: 0,\r\n        can_move: true,\r\n        //是否已经被消除\r\n        is_clear: false,\r\n    },\r\n\r\n    // onLoad () {},\r\n\r\n    start() {},\r\n\r\n    update(dt) {},\r\n    initAnimal(columnnum, rownum, animalMgr) {\r\n        this.clearType = 0;\r\n        this.pos = [];\r\n        this.node.sacle = 1;\r\n        this.is_clear = false;\r\n        if (rownum == -1) {\r\n            this.animType = Math.floor(Math.random() * 5) + 1;\r\n        } else {\r\n            // if(lvdata[\"Lv\"+comeInfo.now_lv].Anim[rownum][columnnum]==0){//填补使用\r\n            //     this.animType=Math.floor(Math.random()*5)+1;\r\n            // }else{\r\n            //     this.animType=lvdata[\"Lv\"+comeInfo.now_lv].Anim[rownum][columnnum];\r\n            // }\r\n            if (lvdata.Anim[rownum][columnnum] == 0) {\r\n                //填补使用\r\n                this.animType = Math.floor(Math.random() * 5) + 1;\r\n            } else {\r\n                this.animType = lvdata.Anim[rownum][columnnum];\r\n            }\r\n        }\r\n        //设置是否可移动\r\n        if (this.animType >= 6) {\r\n            this.node.width = 74;\r\n            this.node.height = 74;\r\n            this.can_move = false;\r\n        } else {\r\n            this.node.width = 74;\r\n            this.node.height = 74;\r\n            this.can_move = true;\r\n        }\r\n        this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[this.animType];\r\n        this.columnNum = columnnum;\r\n        this.rowNum = rownum;\r\n        this.animalMgr = animalMgr;\r\n        this.node.setPosition(utils.rowColumnPosition_Anim(columnnum, rownum));\r\n    },\r\n    //把要移动到的点加入数组\r\n    AddPos(columnnum, rownum) {\r\n        this.columnNum = columnnum;\r\n        this.rowNum = rownum;\r\n        this.animalMgr.animalArray[this.rowNum][this.columnNum] = this;\r\n        let p = [columnnum, rownum];\r\n        this.pos.push(p);\r\n    },\r\n    //填充移动\r\n    FilledMove() {\r\n        let action = [];\r\n        if (this.pos.length > 1) {\r\n            this.node.stopAllActions();\r\n            for (let i = 0; i < this.pos.length; i++) {\r\n                if (i == this.pos.length - 1) {\r\n                    //如果是最后一个就加上缓动系统\r\n                    let fn1 = cc\r\n                        .moveTo(comeInfo.animalMoveTime, utils.rowColumnPosition_Anim(this.pos[i][0], this.pos[i][1]))\r\n                        .easing(cc.easeElasticOut(0.9));\r\n                    let fn2 = cc.scaleTo(0.2, 0.8, 0.8);\r\n                    let fn3 = cc.scaleTo(0.4, 1, 1).easing(cc.easeElasticOut(0.5));\r\n                    let fn = cc.spawn(fn1, cc.sequence(fn2, fn3));\r\n                    action.push(fn);\r\n                } else {\r\n                    action.push(\r\n                        cc.moveTo(comeInfo.animalMoveTime, utils.rowColumnPosition_Anim(this.pos[i][0], this.pos[i][1]))\r\n                    );\r\n                }\r\n            }\r\n            this.node.runAction(cc.sequence(action));\r\n        } else if (this.pos.length == 1) {\r\n            this.node.stopAllActions();\r\n            let fn1 = cc\r\n                .moveTo(comeInfo.animalMoveTime, utils.rowColumnPosition_Anim(this.pos[0][0], this.pos[0][1]))\r\n                .easing(cc.easeElasticOut(0.9));\r\n            let fn2 = cc.scaleTo(0.2, 0.8, 0.8);\r\n            let fn3 = cc.scaleTo(0.4, 1, 1).easing(cc.easeElasticOut(0.5));\r\n            let fn = cc.spawn(fn1, cc.sequence(fn2, fn3));\r\n            this.node.runAction(fn);\r\n        }\r\n        this.pos = [];\r\n    },\r\n    //动物移动\r\n    AnimMove(columnnum, rownum) {\r\n        if (this.can_move) {\r\n            this.node.stopAllActions();\r\n            this.columnNum = columnnum;\r\n            this.rowNum = rownum;\r\n            this.animalMgr.animalArray[this.rowNum][this.columnNum] = this;\r\n            let fn1 = cc.moveTo(comeInfo.animalMoveTime, utils.rowColumnPosition_Anim(columnnum, rownum));\r\n            let fn2 = cc.scaleTo(0.05, 0.5, 0.5);\r\n            let fn3 = cc.scaleTo(0.1, 1, 1).easing(cc.easeElasticOut(0.9));\r\n            this.node.runAction(cc.sequence(fn1, fn2, fn3));\r\n        }\r\n    },\r\n    //消除\r\n    clear() {\r\n        if (this.is_clear) {\r\n            //防止被重复消除\r\n            return;\r\n        }\r\n        cc.ZL.UIMgr.AddScore(cc.ZL.UIMgr.add_score);\r\n        //如果是障碍物就用障碍物消除\r\n        if (this.animType > 6) {\r\n            this.clearObstacle(this, this.rowNum, this.columnNum, 'clear');\r\n            return;\r\n        }\r\n        //先查看该动物上方是否有需要消除的障碍（比如被冰冻，被草困住）\r\n        if (this.FindUP()) {\r\n            //没有需要消除的上层障碍才向下执行\r\n            this.is_clear = true;\r\n            //查看是否有特殊消除效果\r\n            switch (this.clearType) {\r\n                case 1: //消除一行\r\n                    cc.ZL.effMgr.CreatRowEff(this.node.getPosition(), 'row');\r\n                    this.animalMgr.RowClear(this.rowNum, this.columnNum);\r\n                    break;\r\n                case 2: //消除一列\r\n                    cc.ZL.effMgr.CreatRowEff(this.node.getPosition(), 'cloumn');\r\n                    this.animalMgr.ColumnClear(this.rowNum, this.columnNum);\r\n                    break;\r\n                case 3: //范围消除\r\n                    cc.ZL.effMgr.CreatBoomEff(this.node.getPosition());\r\n                    this.animalMgr.RangeClear(this.rowNum, this.columnNum);\r\n                    break;\r\n                case 4: //魔力鸟消除\r\n                    if (this.animType == 6) {\r\n                        this.animType = Math.floor(Math.random() * 5) + 1;\r\n                        //console.log(\"消除类型是\"+randomType);\r\n                        this.animalMgr.TypeClear(this.animType);\r\n                    } else {\r\n                        this.animalMgr.TypeClear(this.animType);\r\n                    }\r\n                    break;\r\n            }\r\n            this.ClearSelf();\r\n        }\r\n    },\r\n    //查看该动物上方是否有需要消除的障碍（比如被冰冻，被草困住）\r\n    FindUP() {\r\n        if (!this.can_move) {\r\n            //不能移动才有可能有障碍\r\n            if (this.animType > 0 && this.animType <= 6) {\r\n                //只有动物上方才有障碍\r\n                if (cc.ZL.iceMgr.UpArray[this.rowNum][this.columnNum] != 0) {\r\n                    cc.ZL.iceMgr.UpArray[this.rowNum][this.columnNum].clear();\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    ClearSelf() {\r\n        //先去除子物体(附加特效什么的)\r\n        let Mchilds = this.node.children;\r\n        for (let i = 0; i < Mchilds.length; i++) {\r\n            Mchilds[i].destroy();\r\n        }\r\n        //查看该格子有没有需要消除的冰块等物体\r\n        if (cc.ZL.iceMgr.iceArray[this.rowNum][this.columnNum] != 0) {\r\n            cc.ZL.iceMgr.iceArray[this.rowNum][this.columnNum].clear();\r\n        }\r\n        //产看周围是否有可以消除的\r\n        setTimeout(() => {\r\n            this.FindAround();\r\n        }, 100);\r\n        //该位置设为空\r\n        this.animalMgr.animalArray[this.rowNum][this.columnNum] = 0;\r\n        let targetnum = this.isTarget();\r\n        if (targetnum == -1) {\r\n            //特效动画\r\n            cc.ZL.effMgr.CreatClearEff(this.node.getPosition());\r\n            cc.ZL.LabelMgr.creatLabel(this.node.getPosition(), 500);\r\n            let fn1 = cc.scaleTo(0.1, 1.2, 1.2);\r\n            let fn2 = cc.scaleTo(comeInfo.animalClearTime, 0, 0);\r\n            let fn3 = cc.sequence([fn1, fn2]);\r\n            this.node.runAction(fn3);\r\n            setTimeout(\r\n                function () {\r\n                    this.animalMgr.animalPool.put(this.node);\r\n                }.bind(this),\r\n                (comeInfo.animalClearTime + 0.1) * 1000\r\n            );\r\n        } else {\r\n            cc.ZL.LabelMgr.creatLabel(this.node.getPosition(), 500);\r\n            cc.ZL.targetMgr.clearTarget(this.node, targetnum);\r\n        }\r\n    },\r\n    deleteMuBiao() {\r\n        let targetnum = this.isTarget();\r\n        if (targetnum != -1) {\r\n            // cc.ZL.LabelMgr.creatLabel(this.node.getPosition(), 500);\r\n            cc.ZL.targetMgr.targetNum(targetnum);\r\n        }\r\n    },\r\n    //产看周围是否有可以消除的\r\n    FindAround() {\r\n        //本身是障碍物就不消除周围了\r\n        if (this.animType > 6) {\r\n            return;\r\n        }\r\n        //上\r\n        if (this.rowNum - 1 >= 0) {\r\n            let anim = this.animalMgr.animalArray[this.rowNum - 1][this.columnNum];\r\n            if (anim != 0 && anim != -1) {\r\n                this.clearObstacle(anim, this.rowNum - 1, this.columnNum, 'FindAround上');\r\n            }\r\n        }\r\n        //下\r\n        if (this.rowNum + 1 < comeInfo.column) {\r\n            let anim = this.animalMgr.animalArray[this.rowNum + 1][this.columnNum];\r\n            if (anim != 0 && anim != -1) {\r\n                this.clearObstacle(anim, this.rowNum + 1, this.columnNum, 'FindAround下');\r\n            }\r\n        }\r\n        //左\r\n        if (this.columnNum - 1 >= 0) {\r\n            let anim = this.animalMgr.animalArray[this.rowNum][this.columnNum - 1];\r\n            if (anim != 0 && anim != -1) {\r\n                this.clearObstacle(anim, this.rowNum, this.columnNum - 1, 'FindAround左');\r\n            }\r\n        }\r\n        //右\r\n        if (this.columnNum + 1 < comeInfo.row) {\r\n            let anim = this.animalMgr.animalArray[this.rowNum][this.columnNum + 1];\r\n            if (anim != 0 && anim != -1) {\r\n                this.clearObstacle(anim, this.rowNum, this.columnNum + 1, 'FindAround右');\r\n            }\r\n        }\r\n    },\r\n    //消除障碍物\r\n    clearObstacle(anim, row, column, name = null) {\r\n        if (anim.animType == 7) {\r\n            //单层冰\r\n            this.animalMgr.animalArray[row][column] = 0;\r\n            cc.ZL.musicMgr.PlayMusicOnly(14, false);\r\n            anim.node.runAction(cc.scaleTo(comeInfo.animalClearTime, 0, 0));\r\n            let animtargetnum = anim.isTarget();\r\n            if (animtargetnum != -1) {\r\n                //查看是否是目标\r\n                // console.log('funcName', name)\r\n                cc.ZL.targetMgr.clearTarget(anim.node, animtargetnum);\r\n            } else {\r\n                setTimeout(\r\n                    function () {\r\n                        this.animalMgr.animalPool.put(anim.node);\r\n                    }.bind(this),\r\n                    comeInfo.animalClearTime * 1000 + 100\r\n                );\r\n            }\r\n        } else if (anim.animType == 8) {\r\n            cc.ZL.musicMgr.PlayMusicOnly(14, false);\r\n            anim.animType = 7;\r\n            anim.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[anim.animType];\r\n        } else if (anim.animType == 9) {\r\n            cc.ZL.musicMgr.PlayMusicOnly(14, false);\r\n            anim.animType = 8;\r\n            anim.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[anim.animType];\r\n        }\r\n    },\r\n\r\n    //查看是不是目标物\r\n    isTarget() {\r\n        //  let lvtarget=lvdata[\"Lv\"+comeInfo.now_lv].target;\r\n        let lvtarget = lvdata.target;\r\n        for (let i = 0; i < lvtarget.length; i++) {\r\n            if (this.animType == lvtarget[i][0]) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    //产生横向消除特效\r\n    creatRowEff(bol) {\r\n        this.clearType = 1;\r\n        cc.ZL.effMgr.dirEff(this.node, 'Row');\r\n        this.playAnim(2);\r\n        if (!bol) {\r\n            return;\r\n        }\r\n        cc.ZL.musicMgr.MyplayMusic(10, false);\r\n    },\r\n    //产生纵向消除特效\r\n    creatColnumEff(bol) {\r\n        this.clearType = 2;\r\n        cc.ZL.effMgr.dirEff(this.node, 'Column');\r\n        this.playAnim(1);\r\n        if (!bol) {\r\n            return;\r\n        }\r\n        //cc.ZL.musicMgr.MyplayMusic(10,false);\r\n    },\r\n    //产生T型特效\r\n    CreatTEff() {\r\n        this.clearType = 3;\r\n        this.playAnim(3);\r\n        cc.ZL.effMgr.TEff(this.node);\r\n    },\r\n    //产生魔力鸟特效\r\n    CreatFiveEff() {\r\n        cc.ZL.effMgr.CratNiao(this.node);\r\n        this.clearType = 4;\r\n        this.animType = 6;\r\n        this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.spr[this.animType];\r\n    },\r\n\r\n    //播放动画\r\n    playAnim(type) {\r\n        if (type == 1) {\r\n            this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.Animspr[this.animType];\r\n            this.node.getComponent(cc.Animation).play('zhong');\r\n        } else if (type == 2) {\r\n            this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.Animspr[this.animType];\r\n            this.node.getComponent(cc.Animation).play('heng');\r\n        } else if (type == 3) {\r\n            this.node.getComponent(cc.Sprite).spriteFrame = cc.ZL.sprMgr.Animspr[this.animType];\r\n            this.node.getComponent(cc.Animation).play('fanwei');\r\n        }\r\n    },\r\n    //停止播放动画\r\n    stopAnim() {\r\n        this.node.getComponent(cc.Animation).stop();\r\n    },\r\n});\r\n"]}